(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"F+kV":function(e,n,t){"use strict";t.r(n);var r=t("cDcd"),a=t.n(r),l=t("dEAq"),s=t("H1Ra");t("Rsk4");n["default"]=e=>(a.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&l["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("h1",{id:"chunk-file-load"},a.a.createElement(l["AnchorLink"],{to:"#chunk-file-load","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"chunk-file-load"),a.a.createElement("h2",{id:"\u4ecb\u7ecd"},a.a.createElement(l["AnchorLink"],{to:"#\u4ecb\u7ecd","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u4ecb\u7ecd"),a.a.createElement("p",null,"\u6587\u4ef6\u5206\u7247\u4e0a\u4f20\u5de5\u5177",a.a.createElement("br",null),"\u652f\u6301",a.a.createElement("code",null,"Blob"),"\u3001",a.a.createElement("code",null,"File"),"\u3001",a.a.createElement("code",null,"ArrayBuffer"),"\u3001",a.a.createElement("code",null,"Base64"),"\u7c7b\u578b\u7684\u6587\u4ef6\u4e0a\u4f20",a.a.createElement("br",null),"\u652f\u6301\u65ad\u70b9\u7eed\u4f20 \u652f\u6301\u63a7\u5236\u4e0a\u4f20",a.a.createElement("br",null),"\u652f\u6301\u5c0f\u7a0b\u5e8f\u7aef\u6587\u4ef6\u4e0a\u4f20"),a.a.createElement("h2",{id:"demo"},a.a.createElement(l["AnchorLink"],{to:"#demo","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"Demo"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u5b9e\u9645\u6587\u4ef6\u4e0a\u4f20",a.a.createElement("code",null,"Demo"))),a.a.createElement("p",null,a.a.createElement("code",null,"fork"),a.a.createElement(l["Link"],{to:"https://github.com/food-billboard/chunk-file-load"},"github"),"\u4ee3\u7801",a.a.createElement("br",null),"\u672c\u5730\u6267\u884c",a.a.createElement("code",null,"npm run start"),"\u548c",a.a.createElement("code",null,"npm run server")," \u6267\u884c\u672c\u5730\u8c03\u8bd5"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("code",null,"mock"),"\u540e\u53f0",a.a.createElement("code",null,"Demo"))),a.a.createElement("p",null,"\u5f53\u524d\u9875\u9762",a.a.createElement("code",null,"Demo"),"\u4e3a",a.a.createElement("code",null,"Mock"),"\u7248\u672c\u3002"),a.a.createElement("h2",{id:"\u5b9e\u4f8b"},a.a.createElement(l["AnchorLink"],{to:"#\u5b9e\u4f8b","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u4f8b"),a.a.createElement("p",null,a.a.createElement(l["Link"],{to:"https://food-billboard.github.io/chunk-file-load-component/#/"},"React\u7ec4\u4ef6")),a.a.createElement("h2",{id:"api"},a.a.createElement(l["AnchorLink"],{to:"#api","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"API"),a.a.createElement("h3",{id:"\u65b9\u6cd5\u5c5e\u6027"},a.a.createElement(l["AnchorLink"],{to:"#\u65b9\u6cd5\u5c5e\u6027","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u65b9\u6cd5\u5c5e\u6027"),a.a.createElement("h3",{id:"add"},a.a.createElement(l["AnchorLink"],{to:"#add","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"add"),a.a.createElement("p",null,"\u6dfb\u52a0\u4efb\u52a1"),a.a.createElement(s["a"],{code:"//\u652f\u6301\u4efb\u610f\u683c\u5f0f\u7684\u5bf9\u8c61\u53c2\u6570\uff0c\u4f46\u662f\u9700\u8981\u4fdd\u8bc1\u5bf9\u8c61\u5185\u7684\u5fc5\u8981\u53c2\u6570\u90fd\u6b63\u786e\nlet names = upload.add({\n    file: {\n        file: new File([new ArrayBuffer(1024)], 'filename')\n    },   \n    request: {\n        exitDataFn, \n        uploadFn,  \n        completeFn,\n        callback   \n    } \n})",lang:"js"}),a.a.createElement("h3",{id:"deal"},a.a.createElement(l["AnchorLink"],{to:"#deal","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"deal"),a.a.createElement("p",null,"\u6267\u884c\u6307\u5b9a\u7684\u961f\u5217\u4efb\u52a1"),a.a.createElement(s["a"],{code:"const [ name ] = upload.add(/*params...*/)\nupload.deal(name)",lang:"js"}),a.a.createElement("h3",{id:"start"},a.a.createElement(l["AnchorLink"],{to:"#start","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"start"),a.a.createElement("p",null,"\u6267\u884c\u6307\u5b9a\u961f\u5217\u4efb\u52a1\uff0c\u4e0e",a.a.createElement("code",null,"deal"),"\u529f\u80fd\u7c7b\u4f3c",a.a.createElement("br",null),"\u5bf9\u4e8e\u5904\u4e8e\u4e0a\u4f20\u4e2d\u7684\u4efb\u52a1\u65e0\u6548",a.a.createElement("br",null),"\u5f53\u6587\u4ef6\u6682\u505c\u65f6\uff0c\u9700\u8981\u901a\u8fc7\u6b64\u65b9\u6cd5\u7ee7\u7eed\u4efb\u52a1\u6267\u884c",a.a.createElement("br",null),a.a.createElement("code",null,"upload.start(name)")),a.a.createElement("h3",{id:"stop"},a.a.createElement(l["AnchorLink"],{to:"#stop","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"stop"),a.a.createElement("p",null,"\u6682\u505c\u4e0a\u4f20\u4e2d\u7684\u4efb\u52a1",a.a.createElement("br",null),"\u53ea\u5bf9\u4e0a\u4f20\u4e2d\u7684\u4efb\u52a1\u6709\u6548",a.a.createElement("br",null),"\u5bf9\u4e8e\u6682\u505c\u7684\u4efb\u52a1\u53ef\u4ee5\u901a\u8fc7",a.a.createElement("code",null,"start"),"\u7ee7\u7eed\u4e0a\u4f20"),a.a.createElement(s["a"],{code:"upload.stop(...names) //\u4e0d\u4f20\u53c2\u6570\u5219\u6682\u505c\u6240\u6709\u4efb\u52a1",lang:"js"}),a.a.createElement("h3",{id:"cancel"},a.a.createElement(l["AnchorLink"],{to:"#cancel","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"cancel"),a.a.createElement("p",null,"\u53d6\u6d88\u4e0a\u4f20\u4e2d\u7684\u4efb\u52a1 \u53ea\u5bf9\u4e0a\u4f20\u4e2d\u7684\u4efb\u52a1\u6709\u6548 \u4e00\u65e6\u53d6\u6d88\u4e86\u4e0a\u4f20\u4efb\u52a1\u5219\u9700\u8981\u91cd\u65b0\u901a\u8fc7",a.a.createElement("code",null,"upload"),"\u6216",a.a.createElement("code",null,"add"),"\u7b49\u65b9\u6cd5\u91cd\u65b0\u8fdb\u884c\u6dfb\u52a0\u624d\u80fd\u4e0a\u4f20"),a.a.createElement(s["a"],{code:"upload.cancel(...names)",lang:"js"}),a.a.createElement("h3",{id:"upload"},a.a.createElement(l["AnchorLink"],{to:"#upload","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"upload"),a.a.createElement("p",null,"\u4e0a\u4f20\u6587\u4ef6"),a.a.createElement(s["a"],{code:"const upload = new Upload()\nlet config = {\n  file: {\n    file\n  },\n  request: {\n    exitDataFn,\n    uploadFn,\n    completeFn, \n    callback,\n  },\n}\nupload.upload(config)",lang:"js"}),a.a.createElement("h3",{id:"uploading"},a.a.createElement(l["AnchorLink"],{to:"#uploading","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"uploading"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u6548\u679c\u7c7b\u4f3c\u4e8e\u4e0a\u9762\u7684",a.a.createElement("code",null,"upload")),a.a.createElement("li",null,"\u4f46\u662f\u6b64\u65b9\u6cd5\u9002\u7528\u4e8e\u5728\u5916\u90e8\u4e8b\u5148\u5b8c\u6210\u4e86\u5206\u7247\u5de5\u4f5c\uff0c\u5e76\u914d\u7f6e",a.a.createElement("code",null,"chunks")," \u6216\u8005\u662f\u6062\u590d\u4e4b\u524d\u4e0a\u4f20\u5931\u8d25\u7684\u4efb\u52a1"),a.a.createElement("li",null,"\u5982\u679c\u4e0d\u662f\u6062\u590d\u4e0a\u4f20\u7684\u4efb\u52a1")),a.a.createElement("ol",null,a.a.createElement("li",null,"\u5206\u7247\u7684\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7\u6307\u5b9a\u7684\u5355\u4e2a\u5206\u7247\u5927\u5c0f\uff0c\u5426\u5219\u4f1a\u5931\u8d25"),a.a.createElement("li",null,"\u82e5",a.a.createElement("code",null,"md5"),"\u548c",a.a.createElement("code",null,"chunks"),"\u90fd\u6709\u914d\u7f6e\uff0c\u5219\u53ef\u4ee5\u8df3\u8fc7\u52a0\u5bc6\u7684\u8fc7\u7a0b"),a.a.createElement("li",null,"\u53ea\u6709",a.a.createElement("code",null,"chunks"),"\u5219\u9700\u8981\u7ecf\u8fc7\u52a0\u5bc6"),a.a.createElement("li",null,"\u5206\u7247\u540c\u4e0a\u7c7b\u578b\u6240\u793a\uff0c\u4e14\u4e0d\u9650\u5236\u9700\u8981\u76f8\u540c\u7c7b\u578b"),a.a.createElement("li",null,"\u5982\u679c\u6ca1\u6709\u914d\u7f6e\u4f20\u9012\u539f\u59cb\u6587\u4ef6\uff0c\u5219\u9700\u8981\u4f20\u9012",a.a.createElement("code",null,"mime"),"\u5c5e\u6027")),a.a.createElement("p",null,a.a.createElement("strong",null,"\u4fdd\u8bc1\u5206\u7247\u5217\u8868\u7684\u987a\u5e8f\u6b63\u786e"),a.a.createElement("br",null),"\u5206\u7247\u4f1a\u88ab\u7edf\u4e00\u8f6c\u6362\u6210\u4e00\u79cd\u683c\u5f0f\uff0c\u6309\u7167",a.a.createElement("code",null,"api"),"\u7684\u652f\u6301\u7a0b\u5ea6\u987a\u5e8f\u4e3a",a.a.createElement("code",null,"Blob -> File -> base64")),a.a.createElement("h3",{id:"canceladd"},a.a.createElement(l["AnchorLink"],{to:"#canceladd","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"cancelAdd"),a.a.createElement("p",null,"\u53d6\u6d88\u961f\u5217\u4e2d\u7684\u4efb\u52a1 \u53ea\u5bf9\u52a0\u5165\u961f\u5217\u4f46\u8fd8\u5904\u4e8e\u7b49\u5f85\u72b6\u6001\u7684\u4efb\u52a1\u6709\u6548"),a.a.createElement(s["a"],{code:"upload.cancelAdd(...names)    //\u4e0d\u4f20\u5219\u53d6\u6d88\u6240\u6709\u4efb\u52a1",lang:"js"}),a.a.createElement("h3",{id:"resumetask"},a.a.createElement(l["AnchorLink"],{to:"#resumetask","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"resumeTask"),a.a.createElement("p",null,"\u6062\u590d\u4e4b\u524d\u5931\u8d25\u6216\u53d6\u6d88\u7684\u4efb\u52a1",a.a.createElement("br",null),"\u9700\u8981\u4f20\u9012\u5b8c\u6574\u7684\u4efb\u52a1\u683c\u5f0f"),a.a.createElement(s["a"],{code:"upload.resumeTask(task)",lang:"js"}),a.a.createElement("h3",{id:"watch"},a.a.createElement(l["AnchorLink"],{to:"#watch","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"watch"),a.a.createElement("p",null,"\u67e5\u770b\u4e0a\u4f20\u8fdb\u5ea6",a.a.createElement("br",null),"\u8fd4\u56de\u6307\u5b9a\u4efb\u52a1\u7684\u4e0a\u4f20\u8fdb\u5ea6\u96c6\u5408",a.a.createElement("br",null),"\u4f60\u4e5f\u53ef\u4ee5\u5728\u4efb\u52a1\u4e2d\u7684",a.a.createElement("code",null,"watch"),"\u5c5e\u6027\u65b9\u6cd5\u6765\u83b7\u53d6\u5bf9\u5e94\u7684\u4efb\u52a1\u8fdb\u5ea6\u3002"),a.a.createElement(s["a"],{code:"//return [{ error, name, progress, status, total, current, complete } || null]\nupload.watch(...names) //\u4e0d\u4f20\u5219\u8fd4\u56de\u6240\u6709\u8fdb\u5ea6",lang:"js"}),a.a.createElement("h3",{id:"gettask"},a.a.createElement(l["AnchorLink"],{to:"#gettask","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"getTask"),a.a.createElement("p",null,"\u83b7\u53d6\u6307\u5b9a\u7684\u4efb\u52a1\u4fe1\u606f",a.a.createElement("br",null),a.a.createElement("code",null,"upload.getTask(name)")),a.a.createElement("h3",{id:"getoriginfile"},a.a.createElement(l["AnchorLink"],{to:"#getoriginfile","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"getOriginFile"),a.a.createElement("p",null,"\u83b7\u53d6\u6e90\u6587\u4ef6",a.a.createElement("br",null),a.a.createElement("code",null,"upload.getOriginFile(name)")),a.a.createElement("h3",{id:"getstatus"},a.a.createElement(l["AnchorLink"],{to:"#getstatus","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"getStatus"),a.a.createElement("p",null,"\u83b7\u53d6\u4efb\u52a1\u5f53\u524d\u72b6\u6001",a.a.createElement("br",null),a.a.createElement("code",null,"upload.getStatus(name)")),a.a.createElement("h3",{id:"dispose"},a.a.createElement(l["AnchorLink"],{to:"#dispose","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"dispose"),a.a.createElement("p",null,"\u9500\u6bc1\u5b9e\u4f8b",a.a.createElement("code",null,"upload.dispose()")),a.a.createElement("h3",{id:"static-install"},a.a.createElement(l["AnchorLink"],{to:"#static-install","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"static install"),a.a.createElement("p",null,"\u63d2\u4ef6\u6ce8\u518c",a.a.createElement("br",null),"\u53ef\u4ee5\u5728",a.a.createElement("code",null,"read"),"\u548c",a.a.createElement("code",null,"slice"),"\u4e24\u4e2a\u9636\u6bb5\u4f7f\u7528\u5bf9\u5e94\u7684\u63d2\u4ef6\u5bf9\u4efb\u52a1\u8fdb\u884c\u81ea\u5b9a\u4e49\u5904\u7406"),a.a.createElement(s["a"],{code:"import { Upload } from 'chunk-file-upload'\n  Upload.install('slicer', function(task, start, end, chunk) {\n    return chunk // return the chunk \n  })",lang:"js"}),a.a.createElement("h3",{id:"issupport"},a.a.createElement(l["AnchorLink"],{to:"#issupport","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"isSupport"),a.a.createElement("p",null,"\u5f53\u524d\u73af\u5883\u662f\u5426\u652f\u6301",a.a.createElement("br",null),a.a.createElement("code",null,"Upload.isSupport()")),a.a.createElement("h3",{id:"btoa"},a.a.createElement(l["AnchorLink"],{to:"#btoa","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"btoa"),a.a.createElement("p",null,a.a.createElement("code",null,"ArrayBuffer"),"\u8f6c",a.a.createElement("code",null,"Base64")),a.a.createElement("h3",{id:"atob"},a.a.createElement(l["AnchorLink"],{to:"#atob","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"atob"),a.a.createElement("p",null,a.a.createElement("code",null,"Base64"),"\u8f6c",a.a.createElement("code",null,"ArrayBuffer")),a.a.createElement("h3",{id:"file2blob"},a.a.createElement(l["AnchorLink"],{to:"#file2blob","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"file2Blob"),a.a.createElement("p",null,a.a.createElement("code",null,"File"),"\u8f6c",a.a.createElement("code",null,"Blob")),a.a.createElement("h3",{id:"blob2file"},a.a.createElement(l["AnchorLink"],{to:"#blob2file","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"blob2file"),a.a.createElement("p",null,a.a.createElement("code",null,"Blob"),"\u8f6c",a.a.createElement("code",null,"File")),a.a.createElement("h3",{id:"file2arraybuffer"},a.a.createElement(l["AnchorLink"],{to:"#file2arraybuffer","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"file2arraybuffer"),a.a.createElement("p",null,a.a.createElement("code",null,"File"),"\u8f6c",a.a.createElement("code",null,"ArrayBuffer")),a.a.createElement("h3",{id:"blob2arraybuffer"},a.a.createElement(l["AnchorLink"],{to:"#blob2arraybuffer","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"blob2arraybuffer"),a.a.createElement("p",null,a.a.createElement("code",null,"Blob"),"\u8f6c",a.a.createElement("code",null,"ArrayBuffer")),a.a.createElement("h3",{id:"file2base64"},a.a.createElement(l["AnchorLink"],{to:"#file2base64","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"file2base64"),a.a.createElement("p",null,a.a.createElement("code",null,"File"),"\u8f6c",a.a.createElement("code",null,"Base64")),a.a.createElement("h3",{id:"blob2base64"},a.a.createElement(l["AnchorLink"],{to:"#blob2base64","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"blob2base64"),a.a.createElement("p",null,a.a.createElement("code",null,"Blob"),"\u8f6c",a.a.createElement("code",null,"Base64")),a.a.createElement("h3",{id:"arraybuffer2file"},a.a.createElement(l["AnchorLink"],{to:"#arraybuffer2file","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"arraybuffer2file"),a.a.createElement("p",null,a.a.createElement("code",null,"ArrayBuffer"),"\u8f6c",a.a.createElement("code",null,"File")),a.a.createElement("h3",{id:"arraybuffer2blob"},a.a.createElement(l["AnchorLink"],{to:"#arraybuffer2blob","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"arraybuffer2blob"),a.a.createElement("p",null,a.a.createElement("code",null,"ArrayBuffer"),"\u8f6c",a.a.createElement("code",null,"Blob")),a.a.createElement("h3",{id:"base642blob"},a.a.createElement(l["AnchorLink"],{to:"#base642blob","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"base642blob"),a.a.createElement("p",null,a.a.createElement("code",null,"Base64"),"\u8f6c",a.a.createElement("code",null,"Blob")),a.a.createElement("h3",{id:"base642file"},a.a.createElement(l["AnchorLink"],{to:"#base642file","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"base642file"),a.a.createElement("p",null,a.a.createElement("code",null,"Base64"),"\u8f6c",a.a.createElement("code",null,"File")),a.a.createElement("h3",{id:"\u6570\u636e\u7c7b\u578b"},a.a.createElement(l["AnchorLink"],{to:"#\u6570\u636e\u7c7b\u578b","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u6570\u636e\u7c7b\u578b"),a.a.createElement("h4",{id:"ttask"},a.a.createElement(l["AnchorLink"],{to:"#ttask","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"Ttask"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u53c2\u6570"),a.a.createElement("th",null,"\u8bf4\u660e"),a.a.createElement("th",null,"\u7c7b\u578b"),a.a.createElement("th",null,"\u9ed8\u8ba4\u503c"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"config"),a.a.createElement("td",null,"\u5168\u5c40\u914d\u7f6e"),a.a.createElement("td",null,a.a.createElement("code",null,"TConfig")),a.a.createElement("td",null,a.a.createElement("code",null,"{"," chunkSize: 1024 * 1024 * 5, parseIgnore: false ","}"))),a.a.createElement("tr",null,a.a.createElement("td",null,"lifecycle"),a.a.createElement("td",null,"\u751f\u547d\u5468\u671f"),a.a.createElement("td",null,a.a.createElement("code",null,"TLifecycle")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"file"),a.a.createElement("td",null,"\u6587\u4ef6\u4fe1\u606f"),a.a.createElement("td",null,a.a.createElement("code",null,"TFile<T>")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"request"),a.a.createElement("td",null,"\u8bf7\u6c42\u65b9\u6cd5"),a.a.createElement("td",null,a.a.createElement("code",null,"TRequestType")),a.a.createElement("td",null,"-")))),a.a.createElement("h4",{id:"tconfig"},a.a.createElement(l["AnchorLink"],{to:"#tconfig","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"TConfig"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u53c2\u6570"),a.a.createElement("th",null,"\u8bf4\u660e"),a.a.createElement("th",null,"\u7c7b\u578b"),a.a.createElement("th",null,"\u9ed8\u8ba4\u503c"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"retry"),a.a.createElement("td",null,"\u91cd\u8bd5\u6b21\u6570\uff0c\u4e0d\u4f20\u5219\u4e0d\u91cd\u8bd5"),a.a.createElement("td",null,a.a.createElement("code",null,"{"," times: number ","}")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"chunkSize"),a.a.createElement("td",null,"\u5355\u4e00\u5206\u7247\u7684\u5927\u5c0f"),a.a.createElement("td",null,a.a.createElement("code",null,"number")),a.a.createElement("td",null,a.a.createElement("code",null,"1024 * 1024 * 5"))),a.a.createElement("tr",null,a.a.createElement("td",null,"parseIgnore"),a.a.createElement("td",null,"\u662f\u5426\u8df3\u8fc7\u89e3\u6790"),a.a.createElement("td",null,a.a.createElement("code",null,"boolean")),a.a.createElement("td",null,a.a.createElement("code",null,"false"))))),a.a.createElement("h4",{id:"tlifecycle"},a.a.createElement(l["AnchorLink"],{to:"#tlifecycle","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"TLifecycle"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u4e0b\u9762\u6240\u6709\u751f\u547d\u5468\u671f\u7684\u8fd4\u56de\u503c",a.a.createElement("code",null,"R"),"\uff0c\u90fd\u8868\u793a\u4e3a\uff1a ",a.a.createElement("code",null,"boolean | Promise<boolean>")),a.a.createElement("li",null,"\u4e0b\u9762\u6240\u6709\u751f\u547d\u5468\u671f\u7684\u53c2\u6570\u7684",a.a.createElement("code",null,"TLifeCycleParams"),"\uff0c\u90fd\u8868\u793a\u4e3a",a.a.createElement("code",null,"{"," name: Symbol, task: TWrapperTask ","}"))),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u53c2\u6570"),a.a.createElement("th",null,"\u8bf4\u660e"),a.a.createElement("th",null,"\u7c7b\u578b"),a.a.createElement("th",null,"\u9ed8\u8ba4\u503c"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"beforeRead"),a.a.createElement("td",null,"\u6587\u4ef6\u89e3\u6790\u524d"),a.a.createElement("td",null,a.a.createElement("code",null,"(params: TLifeCycleParams, response?: any) => R")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"reading"),a.a.createElement("td",null,"\u6587\u4ef6\u89e3\u6790\u65f6"),a.a.createElement("td",null,a.a.createElement("code",null,"(params: TLifeCycleParams & ","{"," current: number, total: number ","}",", response?: any) => R")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"beforeCheck"),a.a.createElement("td",null,"\u6587\u4ef6\u89e3\u6790\u5b8c\u6210\uff0c\u4e0a\u4f20\u68c0\u67e5\u524d"),a.a.createElement("td",null,a.a.createElement("code",null,"(params: TLifeCycleParams, response?: any) => R")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"afterCheck"),a.a.createElement("td",null,"\u68c0\u67e5\u8bf7\u6c42\u54cd\u5e94\u540e"),a.a.createElement("td",null,a.a.createElement("code",null,"(params: TLifeCycleParams & ","{"," isExists: boolean ","}",", response?: any) => R")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"uploading"),a.a.createElement("td",null,"\u5206\u7247\u4e0a\u4f20\u540e"),a.a.createElement("td",null,a.a.createElement("code",null,"(params: TLifeCycleParams & ","{"," current: number, total: number, complete: number ","}",", response?: any) => R")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"beforeComplete"),a.a.createElement("td",null,"\u5b8c\u6210\u8bf7\u6c42\u524d"),a.a.createElement("td",null,a.a.createElement("code",null,"(params: TLifeCycleParams & ","{"," isExists: boolean ","}",", response?: any) => R")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"afterComplete"),a.a.createElement("td",null,"\u5b8c\u6210\u8bf7\u6c42\u540e"),a.a.createElement("td",null,a.a.createElement("code",null,"(params: TLifeCycleParams & ","{"," success: boolean ","}",", response?: any) => R")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"afterStop"),a.a.createElement("td",null,"\u89e6\u53d1\u6682\u505c\u54cd\u5e94\u540e"),a.a.createElement("td",null,a.a.createElement("code",null,"(params: TLifeCycleParams & ","{"," current: number ","}",", response?: any) => R")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"afterCancel"),a.a.createElement("td",null,"\u89e6\u53d1\u53d6\u6d88\u54cd\u5e94\u540e"),a.a.createElement("td",null,a.a.createElement("code",null,"(params: TLifeCycleParams & ","{"," current: number ","}",", response?: any) => R")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"retry"),a.a.createElement("td",null,"\u89e6\u53d1\u91cd\u8bd5\u4efb\u52a1\u6267\u884c"),a.a.createElement("td",null,a.a.createElement("code",null,"(params: TLifeCycleParams & ","{"," rest: number ","}",", response?: any) => R")),a.a.createElement("td",null,"-")))),a.a.createElement("h4",{id:"tfile"},a.a.createElement(l["AnchorLink"],{to:"#tfile","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"TFile"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u53c2\u6570"),a.a.createElement("th",null,"\u8bf4\u660e"),a.a.createElement("th",null,"\u7c7b\u578b"),a.a.createElement("th",null,"\u9ed8\u8ba4\u503c"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"md5"),a.a.createElement("td",null,"\u6587\u4ef6md5\uff0c\u9884\u5148\u8bbe\u7f6e\u8fd9\u4e2a\u503c\u53ef\u4ee5\u8df3\u8fc7\u89e3\u6790\u8fc7\u7a0b"),a.a.createElement("td",null,a.a.createElement("code",null,"string")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"mime"),a.a.createElement("td",null,"\u6587\u4ef6mime\uff0c\u5f53\u65e0\u6cd5\u4ece\u6e90\u6587\u4ef6\u4e2d\u83b7\u53d6",a.a.createElement("code",null,"mime"),"\u65f6\uff0c\u6b64\u53c2\u6570\u5fc5\u586b"),a.a.createElement("td",null,a.a.createElement("code",null,"string")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"file"),a.a.createElement("td",null,"\u6587\u4ef6\uff0c\u5fc5\u586b"),a.a.createElement("td",null,"`ArrayBuffer"),a.a.createElement("td",null,"string")),a.a.createElement("tr",null,a.a.createElement("td",null,"chunks"),a.a.createElement("td",null,"\u6587\u4ef6\u5206\u7247\uff0c\u9884\u5148\u8bbe\u7f6e\u8fd9\u4e2a\u503c\u53ef\u8df3\u8fc7\u5206\u7247"),a.a.createElement("td",null,"`(ArrayBuffer"),a.a.createElement("td",null,"string")))),a.a.createElement("ul",null,a.a.createElement("li",null,"tips: ",a.a.createElement("code",null,"md5"),"\u548c",a.a.createElement("code",null,"chunks"),"\u7684\u533a\u522b")),a.a.createElement("p",null,"\u8bbe\u7f6e\u4e86",a.a.createElement("code",null,"md5"),"\u5219\u53ef\u8df3\u8fc7\u89e3\u6790\uff0c\u4f46\u662f\u6587\u4ef6\u4e0a\u4f20\u65f6\u4ecd\u9700\u8981\u505a\u6587\u4ef6\u5206\u7247\u5904\u7406",a.a.createElement("br",null),"\u8bbe\u7f6e\u4e86",a.a.createElement("code",null,"chunks"),"\u5219\u53ef\u8df3\u8fc7\u6587\u4ef6\u5206\u7247\uff0c\u4f46\u662f\u4ecd\u9700\u8981\u505a\u6587\u4ef6\u89e3\u6790",a.a.createElement("br",null),"\u540c\u65f6\u8bbe\u7f6e\u4e24\u4e2a\u503c\u53ef\u4ee5\u8df3\u8fc7\u89e3\u6790\u548c\u5206\u7247\uff0c\u52a0\u5feb\u6587\u4ef6\u4e0a\u4f20\u6d41\u7a0b"),a.a.createElement("h4",{id:"trequesttype"},a.a.createElement(l["AnchorLink"],{to:"#trequesttype","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"TRequestType"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u53c2\u6570"),a.a.createElement("th",null,"\u8bf4\u660e"),a.a.createElement("th",null,"\u7c7b\u578b"),a.a.createElement("th",null,"\u9ed8\u8ba4\u503c"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"exitDataFn"),a.a.createElement("td",null,"\u6587\u4ef6\u5b58\u5728\u9a8c\u8bc1"),a.a.createElement("td",null,a.a.createElement("code",null,"TExitDataFn")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"uploadFn"),a.a.createElement("td",null,"\u5206\u7247\u4e0a\u4f20(\u5fc5\u586b)"),a.a.createElement("td",null,a.a.createElement("code",null,"TUploadFn")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"completeFn"),a.a.createElement("td",null,"\u5b8c\u6210\u4e0a\u4f20"),a.a.createElement("td",null,a.a.createElement("code",null,"(params : ","{"," name: Symbol, md5: string ","}",") => any")),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"callback"),a.a.createElement("td",null,"\u5b8c\u6210\u56de\u8c03"),a.a.createElement("td",null,a.a.createElement("code",null,"(err: ","{"," retry?: boolean, error: any ","}",", data: any) => any")),a.a.createElement("td",null,"-")))),a.a.createElement("ul",null,a.a.createElement("li",null,"TExitDataFn \u7c7b\u578b")),a.a.createElement(s["a"],{code:"type TExitDataFnReturnValue = {\n    data: Array<number> | string | number\n    [key: string]: any\n  }\n\n  type TExitDataFn = (params: {\n    filename: string\n    md5: string\n    suffix: string\n    size: number\n    chunkSize: number\n    chunksLength: number\n  }, name: Symbol) => Promise<TExitDataFnReturnValue>",lang:"ts"}),a.a.createElement("ul",null,a.a.createElement("li",null,"TUploadFn \u7c7b\u578b")),a.a.createElement(s["a"],{code:"type TFileType = ArrayBuffer | string | Blob | File\n\n  type TUploadFormData = {\n    file: TFileType\n    md5: string\n    index: number\n    [key: string]: any\n  }\n\n  type TUploadFn = (data: FormData | TUploadFormData, name: Symbol) => ReturnType<TExitDataFn>",lang:"ts"}))))},Rsk4:function(e,n,t){"use strict";t.r(n);var r=t("9og8"),a=t("WmNS"),l=t.n(a),s=t("LtsZ");n["default"]={"use-demo":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=d(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},d=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(7).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,t.e(6).then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.next=37,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 37:return e.sent,e.next=40,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 40:return o=e.sent,f=new o.Upload,m=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.useRef)(),n=(0,i.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],d=function(){e.current.click()},p=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,l,u,c,i;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),l=f.getTask(t),u=l.file.size,c=l.config.chunkSize,i=c*Number(a),o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=8,m();case 8:return e.abrupt("return",{data:i>u?u:i});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){o((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)}))},g=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",o((function(e){return e.push(n),(0,s["default"])(e)}))},E=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),f.upload({file:{file:t},request:{exitDataFn:p,uploadFn:h,completeFn:v,callback:g},lifecycle:{reading:E}}))};return i["default"].createElement(i["default"].Fragment,null,i["default"].createElement("input",{onChange:b,style:{display:"none"},type:"file",ref:e}),i["default"].createElement(a["default"],{onClick:d},"\u70b9\u51fb\u4e0a\u4f20"),i["default"].createElement("ul",{style:{marginTop:24}},i["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return i["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 45:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = \"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }\n"}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo"}},"use-demo-1":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=d(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},d=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(7).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,t.e(6).then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.next=37,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 37:return e.sent,e.next=40,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 40:return o=e.sent,f=new o.Upload,m=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.useRef)(),n=(0,i.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],d=function(){e.current.click()},p=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return e.abrupt("return",{data:0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,l,s,u,c;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),l=f.getTask(t),s=l.file.size,u=l.config.chunkSize,c=u*Number(a),e.next=7,m();case 7:return e.abrupt("return",{data:c>s?s:c});case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",o((function(e){return e.push(n),(0,s["default"])(e)}))},g=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u524d"),(0,s["default"])(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u524d"),(0,s["default"])(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.isExists,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u5b8c\u6210\uff0c\u6587\u4ef6".concat(t?"":"\u4e0d","\u5b58\u5728")),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d\uff0c\u5f53\u524d\u5206\u7247: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u4fdd\u5b58"),(0,s["default"])(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,c["default"])(r["default"].mark((function e(n){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u4fdd\u5b58\u6210\u529f"),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),f.upload({file:{file:t},request:{exitDataFn:p,uploadFn:h,callback:v},lifecycle:{beforeRead:g,reading:E,beforeCheck:b,afterCheck:k,uploading:y,beforeComplete:x,afterComplete:w}}))};return i["default"].createElement(i["default"].Fragment,null,i["default"].createElement("input",{onChange:P,style:{display:"none"},type:"file",ref:e}),i["default"].createElement(a["default"],{onClick:d},"\u70b9\u51fb\u4e0a\u4f20"),i["default"].createElement("ul",{style:{marginTop:24}},i["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return i["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 45:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const callback = (error) => {\n      let message = ""\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = "\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const beforeRead = async () => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u524d`)\n        return [\n          ...prev\n        ]  \n      })\n    } \n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const beforeCheck = async () => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u524d`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const afterCheck = async ({ isExists }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u5b8c\u6210\uff0c\u6587\u4ef6${isExists ? "" : "\u4e0d"}\u5b58\u5728`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const uploading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d\uff0c\u5f53\u524d\u5206\u7247: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const beforeComplete = async () => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u4fdd\u5b58`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const afterComplete = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u4fdd\u5b58\u6210\u529f`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          callback\n        },\n        lifecycle: {\n          beforeRead,\n          reading,\n          beforeCheck,\n          afterCheck,\n          uploading,\n          beforeComplete,\n          afterComplete\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }\n'}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-1"}},"use-demo-2":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=d(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},d=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(7).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,t.e(6).then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.next=37,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 37:return e.sent,e.next=40,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 40:return o=e.sent,f=new o.Upload,m=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.useRef)(),n=(0,i.useState)([]),t=(0,u["default"])(n,2),l=t[0],d=t[1],p=function(){e.current.click()},h=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,l,u,c,i;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),l=f.getTask(t),u=l.file.size,c=l.config.chunkSize,i=c*Number(a),d((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=8,m();case 8:return e.abrupt("return",{data:i>u?u:i});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=function(){d((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)}))},E=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",d((function(e){return e.push(n),(0,s["default"])(e)}))},b=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:d((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t,a,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=(0,u["default"])(n.target.files,1),a=t[0],a){e.next=3;break}return e.abrupt("return");case 3:return d([]),e.next=6,o.Upload.file2Blob(a);case 6:l=e.sent,f.upload({file:{file:l},request:{exitDataFn:h,uploadFn:v,completeFn:g,callback:E},lifecycle:{reading:b}});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return i["default"].createElement(i["default"].Fragment,null,i["default"].createElement("input",{onChange:k,style:{display:"none"},type:"file",ref:e}),i["default"].createElement("p",null,"\u6587\u4ef6\u4f1a\u88ab\u8f6c\u6362\u6210",i["default"].createElement("strong",null,"Blob"),"\u683c\u5f0f"),i["default"].createElement(a["default"],{onClick:p},"\u70b9\u51fb\u4e0a\u4f20"),i["default"].createElement("ul",{style:{marginTop:24}},i["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return i["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 45:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = \"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = async (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      const blobFile = await Upload.file2Blob(file)\n      UploadInstance.upload({\n        file: {\n          file: blobFile,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <p>\u6587\u4ef6\u4f1a\u88ab\u8f6c\u6362\u6210<strong>Blob</strong>\u683c\u5f0f</p>\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  } "}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-2"}},"use-demo-3":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=d(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},d=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(7).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,t.e(6).then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.next=37,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 37:return e.sent,e.next=40,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 40:return o=e.sent,f=new o.Upload,m=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.useRef)(),n=(0,i.useState)([]),t=(0,u["default"])(n,2),l=t[0],d=t[1],p=function(){e.current.click()},h=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,l,u,c,i;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),l=f.getTask(t),u=l.file.size,c=l.config.chunkSize,i=c*Number(a),d((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=8,m();case 8:return e.abrupt("return",{data:i>u?u:i});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=function(){d((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)}))},E=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",d((function(e){return e.push(n),(0,s["default"])(e)}))},b=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:d((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t,a,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=(0,u["default"])(n.target.files,1),a=t[0],a){e.next=3;break}return e.abrupt("return");case 3:return d([]),e.next=6,o.Upload.file2arraybuffer(a);case 6:l=e.sent,f.upload({file:{file:l,mime:a.type},request:{exitDataFn:h,uploadFn:v,completeFn:g,callback:E},lifecycle:{reading:b}});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return i["default"].createElement(i["default"].Fragment,null,i["default"].createElement("input",{onChange:k,style:{display:"none"},type:"file",ref:e}),i["default"].createElement("p",null,"\u6587\u4ef6\u4f1a\u88ab\u8f6c\u6362\u6210",i["default"].createElement("strong",null,"ArrayBuffer"),"\u683c\u5f0f"),i["default"].createElement(a["default"],{onClick:p},"\u70b9\u51fb\u4e0a\u4f20"),i["default"].createElement("ul",{style:{marginTop:24}},i["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return i["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 45:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = \"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = async (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      const bufferFile = await Upload.file2arraybuffer(file)\n      UploadInstance.upload({\n        file: {\n          file: bufferFile,\n          mime: file.type \n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <p>\u6587\u4ef6\u4f1a\u88ab\u8f6c\u6362\u6210<strong>ArrayBuffer</strong>\u683c\u5f0f</p>\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  } "}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-3"}},"use-demo-4":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h,v;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=p(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},p=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.next=17,t.e(11).then(t.t.bind(null,"tL+A",7));case 17:return e.t4=n,e.next=20,Promise.all([t.e(0),t.e(1)]).then(t.t.bind(null,"QpBz",7));case 20:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=25,t.e(7).then(t.bind(null,"oBTY"));case 25:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=30,t.e(6).then(t.bind(null,"tJVT"));case 30:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=n,e.next=35,Promise.resolve().then(t.bind(null,"9og8"));case 35:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.t12=f,e.next=40,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 40:return e.t13=e.sent,o=(0,e.t12)(e.t13),e.next=44,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 44:return e.sent,e.next=47,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 47:return d=e.sent,m=new d.Upload,h=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.useRef)(),n=(0,o.useState)([]),t=(0,c["default"])(n,2),l=t[0],p=t[1],f=function(){e.current.click()},v=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,h();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,l,s,c,i;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),l=m.getTask(t),s=l.file.size,c=l.config.chunkSize,i=c*Number(a),p((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,u["default"])(e)})),e.next=8,h();case 8:return e.abrupt("return",{data:i>s?s:i});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),E=function(){p((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,u["default"])(e)}))},b=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",p((function(e){return e.push(n),(0,u["default"])(e)}))},k=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,h();case 3:p((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,u["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t,a,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=(0,c["default"])(n.target.files,1),a=t[0],a){e.next=3;break}return e.abrupt("return");case 3:if(!(a.size>512e3)){e.next=6;break}return s["default"].info("\u6587\u4ef6\u8fc7\u5927"),e.abrupt("return");case 6:return p([]),e.next=9,d.Upload.file2base64(a);case 9:l=e.sent,m.upload({file:{file:l,mime:a.type},request:{exitDataFn:v,uploadFn:g,completeFn:E,callback:b},lifecycle:{reading:k}});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o["default"].createElement(o["default"].Fragment,null,o["default"].createElement("input",{onChange:y,style:{display:"none"},type:"file",ref:e}),o["default"].createElement("p",null,"\u6587\u4ef6\u4f1a\u88ab\u8f6c\u6362\u6210",o["default"].createElement("strong",null,"Base64"),"\u683c\u5f0f"),o["default"].createElement("p",null,"\u5c3d\u91cf\u4e0a\u4f20\u5c0f\u4e00\u70b9\u7684\u6587\u4ef6"),o["default"].createElement(a["default"],{onClick:f},"\u70b9\u51fb\u4e0a\u4f20"),o["default"].createElement("ul",{style:{marginTop:24}},o["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return o["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",v);case 52:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button, message } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = ""\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = "\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = async (e) => {\n      const [ file ] = e.target.files\n      if(!file) return\n      if(file.size > 1024 * 500) {\n        message.info("\u6587\u4ef6\u8fc7\u5927")\n        return \n      }  \n      setProcessMessageList([])\n      const base64File = await Upload.file2base64(file)\n      UploadInstance.upload({\n        file: {\n          file: base64File,\n          mime: file.type,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <p>\u6587\u4ef6\u4f1a\u88ab\u8f6c\u6362\u6210<strong>Base64</strong>\u683c\u5f0f</p>\n        <p>\u5c3d\u91cf\u4e0a\u4f20\u5c0f\u4e00\u70b9\u7684\u6587\u4ef6</p>\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  } '}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-4"}},"use-demo-5":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h,v;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=p(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},p=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(23).then(t.t.bind(null,"5Nzg",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(22)]).then(t.t.bind(null,"CgBw",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.next=17,t.e(3).then(t.t.bind(null,"MaXC",7));case 17:return e.t4=n,e.next=20,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 20:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.next=24,t.e(11).then(t.t.bind(null,"tL+A",7));case 24:return e.t6=n,e.next=27,Promise.all([t.e(0),t.e(1)]).then(t.t.bind(null,"QpBz",7));case 27:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=32,t.e(6).then(t.bind(null,"tJVT"));case 32:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=n,e.next=37,Promise.resolve().then(t.bind(null,"9og8"));case 37:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.t12=f,e.next=42,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 42:return e.t13=e.sent,o=(0,e.t12)(e.t13),e.next=46,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 46:return e.sent,e.next=49,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 49:return d=e.sent,m=new d.Upload,h=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.useRef)(),n=(0,o.useState)(0),t=(0,c["default"])(n,2),l=t[0],d=t[1],p=!1,f=function(){e.current.click()},v=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d((function(e){return 0})),e.next=3,h();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,l,s,u,c;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),l=m.getTask(t),s=l.file.size,u=l.config.chunkSize,c=u*Number(a),c=c>s?s:c,d((function(e){return c/s})),e.next=9,h();case 9:return e.abrupt("return",{data:c});case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),E=function(){d((function(e){return 1}))},b=function(e){e?(u["default"].error("\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error)),p=!0):u["default"].info("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"),d((function(e){return e}))},k=function(e){var n=(0,c["default"])(e.target.files,1),t=n[0];t&&(d(0),m.upload({file:{file:t},request:{exitDataFn:v,uploadFn:g,completeFn:E,callback:b}}))};return o["default"].createElement(o["default"].Fragment,null,o["default"].createElement("input",{onChange:k,style:{display:"none"},type:"file",ref:e}),o["default"].createElement(s["default"],{onClick:f},"\u70b9\u51fb\u4e0a\u4f20"),o["default"].createElement("p",null,"\u4e0a\u4f20\u8fdb\u5ea6"),o["default"].createElement("div",{style:{width:"60%"}},o["default"].createElement(a["default"],{percent:100*l,status:p?"exception":void 0})))},e.abrupt("return",v);case 54:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button, Progress, message } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ process, setProcess ] = useState(0)\n    let isError = false \n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcess(_ => {\n        return 0 \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      let nextOffset = chunkSize * Number(index)\n      nextOffset = nextOffset > size ? size : nextOffset \n      setProcess(_ => {\n        return nextOffset / size \n      })\n      await sleep()\n      return {\n        data: nextOffset\n      }\n    }\n\n    const completeFn = () => {\n      setProcess(_ => {\n        return 1\n      })\n    }\n\n    const callback = (error) => {\n      if(error) {\n        message.error(`\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`)\n        isError = true \n      }else {\n        message.info("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f")\n      }\n      setProcess(prev => {\n        return prev\n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcess(0)\n      UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <p>\u4e0a\u4f20\u8fdb\u5ea6</p>\n        <div style={{width: "60%"}}>\n          <Progress percent={process * 100} status={isError ? "exception" : undefined} />\n        </div>\n      </>\n    )\n\n  }'}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-5"}},"use-demo-6":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h,v;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=p(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},p=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(12).then(t.t.bind(null,"lfLe",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(13)]).then(t.t.bind(null,"Cp9S",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.next=17,t.e(3).then(t.t.bind(null,"MaXC",7));case 17:return e.t4=n,e.next=20,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 20:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=25,t.e(7).then(t.bind(null,"oBTY"));case 25:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=30,t.e(6).then(t.bind(null,"tJVT"));case 30:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=n,e.next=35,Promise.resolve().then(t.bind(null,"9og8"));case 35:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.t12=f,e.next=40,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 40:return e.t13=e.sent,o=(0,e.t12)(e.t13),e.next=44,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 44:return e.sent,e.next=47,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 47:return d=e.sent,m=new d.Upload,h=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.useRef)(),n=(0,o.useState)([]),t=(0,c["default"])(n,2),l=t[0],d=t[1],p=(0,o.useState)(!1),f=(0,c["default"])(p,2),v=f[0],g=f[1],E=(0,o.useState)(!1),b=(0,c["default"])(E,2),k=b[0],y=b[1],x=(0,o.useState)([]),w=(0,c["default"])(x,2),P=w[0],M=w[1],F=function(){e.current.click()},S=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d, ".concat((new Date).toString())),e})),e.next=3,h();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,l,s,c,i;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),l=m.getTask(t),s=l.file.size,c=l.config.chunkSize,i=c*Number(a),d((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247, ").concat((new Date).toString())),(0,u["default"])(e)})),e.next=8,h();case 8:return e.abrupt("return",{data:i>s?s:i});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),O=function(){d((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d, ".concat((new Date).toString())),(0,u["default"])(e)}))},T=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error,", ").concat((new Date).toString()):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f, ".concat((new Date).toString()),d((function(e){return e.push(n),(0,u["default"])(e)}))},D=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,h();case 3:d((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t,", ").concat((new Date).toString())),(0,u["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:d((function(e){return e.push("\u4efb\u52a1\u4e0a\u4f20\u6682\u505c, ".concat((new Date).toString())),(0,u["default"])(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:d((function(e){return e.push("\u4efb\u52a1\u4e0a\u4f20\u53d6\u6d88, ".concat((new Date).toString())),(0,u["default"])(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e){var n=(0,c["default"])(e.target.files,1),t=n[0];if(t){d([]);var r=m.upload({file:{file:t},request:{exitDataFn:S,uploadFn:L,completeFn:O,callback:T},lifecycle:{reading:D,afterStop:C,afterCancel:U}});M(r)}},z=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t,a,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=(0,c["default"])(P,1),t=n[0],!k&&t){e.next=3;break}return e.abrupt("return");case 3:return y(!0),a=v?m.start:m.stop,l=v?"\u4f60\u6267\u884c\u4e86\u7ee7\u7eed\u4e0a\u4f20\u64cd\u4f5c":"\u4f60\u6267\u884c\u4e86\u6682\u505c\u4e0a\u4f20\u64cd\u4f5c",e.next=8,h();case 8:a.call(m,t),g((function(e){return!e})),d((function(e){return e.push("".concat(l,", ").concat((new Date).toString())),e})),y(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t,a,l,s,u;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=(0,c["default"])(P,1),t=n[0],!k&&t){e.next=3;break}return e.abrupt("return");case 3:return y(!0),a=m.getTask(t),l=a.tool.file.isTaskCancelAdd(),s=l?m.cancelAdd:m.cancel,u=l?"\u4f60\u6267\u884c\u4e86\u53d6\u6d88\u6dfb\u52a0\u4efb\u52a1\u64cd\u4f5c":"\u4f60\u6267\u884c\u4e86\u53d6\u6d88\u4efb\u52a1\u4e0a\u4f20\u64cd\u4f5c",e.next=10,h();case 10:s.call(m,t),d((function(e){return e.push("".concat(u,", ").concat((new Date).toString())),e})),M([]),y(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o["default"].createElement(o["default"].Fragment,null,o["default"].createElement("input",{onChange:j,style:{display:"none"},type:"file",ref:e}),o["default"].createElement(a["default"],null,o["default"].createElement(s["default"],{loading:k,onClick:F},"\u70b9\u51fb\u4e0a\u4f20"),o["default"].createElement(s["default"],{loading:k,onClick:z},v?"\u7ee7\u7eed\u4e0a\u4f20":"\u6682\u505c\u4e0a\u4f20"),o["default"].createElement(s["default"],{loading:k,onClick:R},"\u53d6\u6d88\u4e0a\u4f20")),o["default"].createElement("ul",{style:{marginTop:24}},o["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return o["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",v);case 52:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button, Space } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n    const [ isStop, setIsStop ] = useState(false)\n    const [ loading, setLoading ] = useState(false)\n    const [ fileList, setFileList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d, ${new Date().toString()}`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247, ${new Date().toString()}`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d, ${new Date().toString()}`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = ""\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}, ${new Date().toString()}`\n      }else {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u6210\u529f, ${new Date().toString()}`\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const afterStop = async () => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u4efb\u52a1\u4e0a\u4f20\u6682\u505c, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const afterCancel = async () => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u4efb\u52a1\u4e0a\u4f20\u53d6\u6d88, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      const result = UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading,\n          afterStop,\n          afterCancel\n        }\n      })\n      setFileList(result)\n    }\n\n    const handleStop = async () => {\n       const [ fileName ] = fileList\n      if(loading || !fileName) return \n      setLoading(true)\n      const method = isStop ? UploadInstance.start : UploadInstance.stop \n      const message = isStop ? "\u4f60\u6267\u884c\u4e86\u7ee7\u7eed\u4e0a\u4f20\u64cd\u4f5c" : "\u4f60\u6267\u884c\u4e86\u6682\u505c\u4e0a\u4f20\u64cd\u4f5c"\n      await sleep()\n      method.call(UploadInstance, fileName)\n      setIsStop(prev => !prev)\n      setProcessMessageList(prev => {\n        prev.push(`${message}, ${new Date().toString()}`)\n        return prev \n      })\n      setLoading(false)\n    }\n\n    const handleCancel = async () => {\n      const [ fileName ] = fileList\n      if(loading || !fileName) return \n      setLoading(true)\n      const task = UploadInstance.getTask(fileName)\n      const isTaskCancelAdd = task.tool.file.isTaskCancelAdd()\n      const method = isTaskCancelAdd ? UploadInstance.cancelAdd : UploadInstance.cancel \n      const message = isTaskCancelAdd ? "\u4f60\u6267\u884c\u4e86\u53d6\u6d88\u6dfb\u52a0\u4efb\u52a1\u64cd\u4f5c" : "\u4f60\u6267\u884c\u4e86\u53d6\u6d88\u4efb\u52a1\u4e0a\u4f20\u64cd\u4f5c"\n      await sleep()\n      method.call(UploadInstance, fileName)\n      setProcessMessageList(prev => {\n        prev.push(`${message}, ${new Date().toString()}`)\n        return prev \n      })\n      setFileList([])\n      setLoading(false)\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <Space>\n          <Button loading={loading} onClick={handleUpload}>\n            \u70b9\u51fb\u4e0a\u4f20\n          </Button>\n          <Button loading={loading} onClick={handleStop}>\n            {\n              isStop ? "\u7ee7\u7eed\u4e0a\u4f20" : "\u6682\u505c\u4e0a\u4f20"\n            }\n          </Button>\n          <Button loading={loading} onClick={handleCancel}>\n            \u53d6\u6d88\u4e0a\u4f20\n          </Button>\n        </Space>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }'}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-6"}},"use-demo-7":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=d(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},d=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(7).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,t.e(6).then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.next=37,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 37:return e.sent,e.next=40,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 40:return o=e.sent,f=new o.Upload,m=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.useRef)(),n=(0,i.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],d=0,p=function(){e.current.click()},h=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d, ".concat((new Date).toString())),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,l,u,c,i;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d++,!(d<=2)){e.next=3;break}throw new Error("\u4e0a\u4f20\u5931\u8d25\u91cd\u8bd5\u6d4b\u8bd5");case 3:return a=n.get("index"),l=f.getTask(t),u=l.file.size,c=l.config.chunkSize,i=c*Number(a),o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247, ").concat((new Date).toString())),(0,s["default"])(e)})),e.next=11,m();case 11:return e.abrupt("return",{data:i>u?u:i});case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=function(){o((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d, ".concat((new Date).toString())),(0,s["default"])(e)}))},E=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error,", ").concat((new Date).toString()):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f, ".concat((new Date).toString()),o((function(e){return e.push(n),(0,s["default"])(e)}))},b=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t,", ").concat((new Date).toString())),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u91cd\u8bd5, ".concat((new Date).toString())),(0,s["default"])(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),f.upload({config:{retry:{times:2}},file:{file:t},request:{exitDataFn:h,uploadFn:v,completeFn:g,callback:E},lifecycle:{reading:b,retry:k}}))};return i["default"].createElement(i["default"].Fragment,null,i["default"].createElement("input",{onChange:y,style:{display:"none"},type:"file",ref:e}),i["default"].createElement("p",null,"\u4ee5\u4e0b\u4e0a\u4f20\u6d41\u7a0b\u4f1a\u51fa\u73b0\u4e24\u6b21\u4e0a\u4f20\u5931\u8d25"),i["default"].createElement(a["default"],{onClick:p},"\u70b9\u51fb\u4e0a\u4f20"),i["default"].createElement("ul",{style:{marginTop:24}},i["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return i["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 45:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n    let errorTimes = 0 \n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d, ${new Date().toString()}`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      errorTimes ++ \n      if(errorTimes <= 2) {\n        throw new Error(\"\u4e0a\u4f20\u5931\u8d25\u91cd\u8bd5\u6d4b\u8bd5\")\n      }\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247, ${new Date().toString()}`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d, ${new Date().toString()}`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}, ${new Date().toString()}`\n      }else {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u6210\u529f, ${new Date().toString()}`\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const retry = async () => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u91cd\u8bd5, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        config: {\n          retry: {\n            times: 2\n          }\n        },\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading,\n          retry \n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <p>\u4ee5\u4e0b\u4e0a\u4f20\u6d41\u7a0b\u4f1a\u51fa\u73b0\u4e24\u6b21\u4e0a\u4f20\u5931\u8d25</p>\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }\n"}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-7"}},"use-demo-8":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=d(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},d=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(7).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,t.e(6).then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.next=37,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 37:return e.sent,e.next=40,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 40:return o=e.sent,f=new o.Upload,m=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.useRef)(),n=(0,i.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],d=function(){e.current.click()},p=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,l,u,c,i;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),l=f.getTask(t),u=l.file.size,c=l.config.chunkSize,i=c*Number(a),o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=8,m();case 8:return e.abrupt("return",{data:i>u?u:i});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){o((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)}))},g=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",o((function(e){return e.push(n),(0,s["default"])(e)}))},E=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),f.upload({config:{chunkSize:10485760},file:{file:t},request:{exitDataFn:p,uploadFn:h,completeFn:v,callback:g},lifecycle:{reading:E}}))};return i["default"].createElement(i["default"].Fragment,null,i["default"].createElement("input",{onChange:b,style:{display:"none"},type:"file",ref:e}),i["default"].createElement("p",null,"\u8bbe\u7f6e\u5206\u7247\u5927\u5c0f\u4e3a",i["default"].createElement("strong",null,"10M")),i["default"].createElement(a["default"],{onClick:d},"\u70b9\u51fb\u4e0a\u4f20"),i["default"].createElement("ul",{style:{marginTop:24}},i["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return i["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 45:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = \"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        config: {\n          chunkSize: 1024 * 1024 * 10\n        },\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <p>\u8bbe\u7f6e\u5206\u7247\u5927\u5c0f\u4e3a<strong>10M</strong></p>\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }"}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-8"}},"use-demo-9":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=d(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},d=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(7).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,t.e(6).then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.next=37,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 37:return e.sent,e.next=40,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 40:return o=e.sent,f=new o.Upload,m=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.useRef)(),n=(0,i.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],d=function(){e.current.click()},p=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,l,u,c,i;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),l=f.getTask(t),u=l.file.size,c=l.config.chunkSize,i=c*Number(a),o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=8,m();case 8:return e.abrupt("return",{data:i>u?u:i});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){o((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)}))},g=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",o((function(e){return e.push(n),(0,s["default"])(e)}))},E=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),f.upload({config:{parseIgnore:!0},file:{file:t},request:{exitDataFn:p,uploadFn:h,completeFn:v,callback:g},lifecycle:{reading:E}}))};return i["default"].createElement(i["default"].Fragment,null,i["default"].createElement("input",{onChange:b,style:{display:"none"},type:"file",ref:e}),i["default"].createElement("p",null,"\u4ee5\u4e0b\u4e0d\u4f1a\u663e\u793a\u89e3\u6790\u7684\u8fdb\u5ea6\u4fe1\u606f"),i["default"].createElement(a["default"],{onClick:d},"\u70b9\u51fb\u4e0a\u4f20"),i["default"].createElement("ul",{style:{marginTop:24}},i["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return i["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 45:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = \"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        config: {\n          parseIgnore: true \n        },\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <p>\u4ee5\u4e0b\u4e0d\u4f1a\u663e\u793a\u89e3\u6790\u7684\u8fdb\u5ea6\u4fe1\u606f</p>\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }"}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-9"}},"use-demo-10":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h,v,g;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=p(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},p=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.next=17,Promise.all([t.e(3),t.e(24)]).then(t.t.bind(null,"cUip",7));case 17:return e.t4=n,e.next=20,Promise.all([t.e(0),t.e(1),t.e(10),t.e(2),t.e(21)]).then(t.t.bind(null,"iJl9",7));case 20:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=25,t.e(7).then(t.bind(null,"oBTY"));case 25:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=30,t.e(6).then(t.bind(null,"tJVT"));case 30:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=n,e.next=35,Promise.resolve().then(t.bind(null,"9og8"));case 35:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.t12=f,e.next=40,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 40:return e.t13=e.sent,o=(0,e.t12)(e.t13),e.next=44,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 44:return e.sent,e.next=47,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 47:return d=e.sent,m=new d.Upload,h=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){return"string"===typeof e&&/([a-f\d]{32}|[A-F\d]{32})/.test(e)},g=function(){var e=(0,o.useRef)(),n=(0,o.useState)([]),t=(0,c["default"])(n,2),l=t[0],d=t[1],p=(0,o.useState)(""),f=(0,c["default"])(p,2),g=f[0],E=f[1],b=function(){e.current.click()},k=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,h();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,l,s,c,i;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),l=m.getTask(t),s=l.file.size,c=l.config.chunkSize,i=c*Number(a),d((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,u["default"])(e)})),e.next=8,h();case 8:return e.abrupt("return",{data:i>s?s:i});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),x=function(){d((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,u["default"])(e)}))},w=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",d((function(e){return e.push(n),(0,u["default"])(e)}))},P=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,h();case 3:d((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,u["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),M=function(e){var n=(0,c["default"])(e.target.files,1),t=n[0];t&&(d([]),m.upload({file:{file:t,md5:g},request:{exitDataFn:k,uploadFn:y,completeFn:x,callback:w},lifecycle:{reading:P}}))};return o["default"].createElement(o["default"].Fragment,null,o["default"].createElement("input",{onChange:M,style:{display:"none"},type:"file",ref:e}),o["default"].createElement("p",null,"\u63d0\u524d\u4f20\u5165\u6587\u4ef6",o["default"].createElement("strong",null,"md5"),"\u914d\u7f6e"),o["default"].createElement("p",null,"\u4ee5\u4e0b\u4e0a\u4f20\u6d41\u7a0b\u4f1a\u8df3\u8fc7\u6587\u4ef6\u89e3\u6790\u8fc7\u7a0b"),o["default"].createElement(s["default"],{value:g,onChange:function(e){return E(e.target.value)},placeholder:"\u8bf7\u5148\u5199\u5165\u8981\u4e0a\u4f20\u6587\u4ef6\u7684md5"}),o["default"].createElement(a["default"],{onClick:b,disabled:!v(g)},"\u70b9\u51fb\u4e0a\u4f20"),o["default"].createElement("ul",{style:{marginTop:24}},o["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return o["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",g);case 53:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button, Input } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n\n  const UploadInstance = new Upload() \n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n  const isMd5 = (str) => typeof str === \'string\' && /([a-f\\d]{32}|[A-F\\d]{32})/.test(str)\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n    const [ md5, setMd5 ] = useState("")\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = ""\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = "\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        file: {\n          file,\n          md5\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <p>\u63d0\u524d\u4f20\u5165\u6587\u4ef6<strong>md5</strong>\u914d\u7f6e</p>\n        <p>\u4ee5\u4e0b\u4e0a\u4f20\u6d41\u7a0b\u4f1a\u8df3\u8fc7\u6587\u4ef6\u89e3\u6790\u8fc7\u7a0b</p>\n        <Input value={md5} onChange={e => setMd5(e.target.value)} placeholder="\u8bf7\u5148\u5199\u5165\u8981\u4e0a\u4f20\u6587\u4ef6\u7684md5" />\n        <Button onClick={handleUpload} disabled={!isMd5(md5)}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }'}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-10"}},"use-demo-11":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h,v;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=p(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},p=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(12).then(t.t.bind(null,"lfLe",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(13)]).then(t.t.bind(null,"Cp9S",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.next=17,t.e(3).then(t.t.bind(null,"MaXC",7));case 17:return e.t4=n,e.next=20,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 20:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=25,t.e(7).then(t.bind(null,"oBTY"));case 25:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=30,t.e(6).then(t.bind(null,"tJVT"));case 30:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=n,e.next=35,Promise.resolve().then(t.bind(null,"9og8"));case 35:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.t12=f,e.next=40,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 40:return e.t13=e.sent,o=(0,e.t12)(e.t13),e.next=44,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 44:return e.sent,e.next=47,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 47:return d=e.sent,m=new d.Upload,h=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.useRef)(),n=(0,o.useState)([]),t=(0,c["default"])(n,2),l=t[0],d=t[1],p=(0,o.useState)(null),f=(0,c["default"])(p,2),v=f[0],g=f[1],E=function(){e.current.click()},b=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d, ".concat((new Date).toString())),e})),e.next=3,h();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,l,s,c,i;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),l=m.getTask(t),s=l.file.size,c=l.config.chunkSize,i=c*Number(a),d((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247, ").concat((new Date).toString())),(0,u["default"])(e)})),e.next=8,h();case 8:return e.abrupt("return",{data:i>s?s:i});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),y=function(){d((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d, ".concat((new Date).toString())),(0,u["default"])(e)}))},x=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error,", ").concat((new Date).toString()):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f, ".concat((new Date).toString()),d((function(e){return e.push(n),(0,u["default"])(e)}))},w=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,h();case 3:d((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t,", ").concat((new Date).toString())),(0,u["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){d((function(e){return e.push("\u6062\u590d\u6587\u4ef6\u4e0a\u4f20, ".concat((new Date).toString())),(0,u["default"])(e)})),m.resumeTask(v),m.deal(v.symbol)},M=function(e){var n=(0,c["default"])(e.target.files,1),t=n[0];if(t){d([]),g(null);var r=m.upload({file:{file:t},request:{exitDataFn:b,uploadFn:k,completeFn:y,callback:x},lifecycle:{reading:w}}),a=(0,c["default"])(r,1),l=a[0],s=m.getTask(l);g(s)}};return o["default"].createElement(o["default"].Fragment,null,o["default"].createElement("input",{onChange:M,style:{display:"none"},type:"file",ref:e}),o["default"].createElement(a["default"],null,o["default"].createElement(s["default"],{onClick:E},"\u70b9\u51fb\u4e0a\u4f20"),o["default"].createElement(s["default"],{onClick:P,disabled:!v||v.tool.file.isTaskDealing()},"\u6062\u590d\u4e0a\u4f20")),o["default"].createElement("ul",{style:{marginTop:24}},o["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return o["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",v);case 52:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button, Space } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n    const [ task, setTask ] = useState(null)\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d, ${new Date().toString()}`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247, ${new Date().toString()}`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d, ${new Date().toString()}`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}, ${new Date().toString()}`\n      }else {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u6210\u529f, ${new Date().toString()}`\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const handleResumeUpload = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6062\u590d\u6587\u4ef6\u4e0a\u4f20, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n      UploadInstance.resumeTask(task)\n      UploadInstance.deal(task.symbol)\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      setTask(null)\n      const [ result ] = UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n      const task = UploadInstance.getTask(result)\n      setTask(task)\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <Space>\n          <Button onClick={handleUpload}>\n            \u70b9\u51fb\u4e0a\u4f20\n          </Button>\n          <Button onClick={handleResumeUpload} disabled={!task || task.tool.file.isTaskDealing()}>\n            \u6062\u590d\u4e0a\u4f20\n          </Button>\n        </Space>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }\n"}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-11"}},"use-demo-12":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=d(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},d=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(7).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,t.e(6).then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.next=37,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 37:return e.sent,e.next=40,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 40:return o=e.sent,o.Upload.install("slicer",function(){var e=(0,c["default"])(r["default"].mark((function e(n,t,a,l,s){var u;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.Upload.blob2arraybuffer(l.slice(t,a));case 2:return u=e.sent,e.abrupt("return",u);case 4:case"end":return e.stop()}}),e)})));return function(n,t,r,a,l){return e.apply(this,arguments)}}()),f=new o.Upload,m=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.useRef)(),n=(0,i.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],d=function(){e.current.click()},p=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,l,u,c,i;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),l=f.getTask(t),u=l.file.size,c=l.config.chunkSize,i=c*Number(a),o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=8,m();case 8:return e.abrupt("return",{data:i>u?u:i});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){o((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)}))},g=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",o((function(e){return e.push(n),(0,s["default"])(e)}))},E=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),f.upload({file:{file:t},request:{exitDataFn:p,uploadFn:h,completeFn:v,callback:g},lifecycle:{reading:E}}))};return i["default"].createElement(i["default"].Fragment,null,i["default"].createElement("input",{onChange:b,style:{display:"none"},type:"file",ref:e}),i["default"].createElement(a["default"],{onClick:d},"\u70b9\u51fb\u4e0a\u4f20"),i["default"].createElement("ul",{style:{marginTop:24}},i["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return i["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 46:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n\n  Upload.install("slicer", async (task, start, end, file, stepValue) => {\n    const result = await Upload.blob2arraybuffer(file.slice(start, end))\n    return result\n  })\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = ""\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = "\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }\n'}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-12"}},"use-demo-13":{component:Object(s["dynamic"])({loader:function(){var e=Object(r["default"])(l.a.mark((function e(){var n,r,a,s,u,c,i,o,d,p,f,m,h,v,g;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=p(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=a?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r["default"]=e,t&&t.set(e,r),r},p=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(7).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,t.e(6).then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,c=(0,e.t8)(e.t9),e.t10=f,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,i=(0,e.t10)(e.t11),e.next=37,Promise.resolve().then(t.t.bind(null,"Exp3",7));case 37:return e.sent,e.next=40,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 40:return o=e.sent,e.t12=n,e.next=44,t.e(20).then(t.t.bind(null,"vDqi",7));case 44:return e.t13=e.sent,d=(0,e.t12)(e.t13),m=new o.Upload,h=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=!1,g=function(){var e=(0,i.useRef)(),n=(0,i.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],p=function(){e.current.click()},f=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.size,e.abrupt("return",d["default"].get("/api/check",{params:n}).then((function(e){var n=e.data.res,r=!1===n.data;return o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d\uff0c\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff1a".concat(r?"":"\u4e0d","\u5b58\u5728")),e})),r?{data:t}:n})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=4,h();case 4:return e.abrupt("return",d["default"].post("/api/load",n).then((function(e){return e.data.res})));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),E=function(e){var n=e.md5;return o((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)})),d["default"].get("/api/complete",{params:{md5:n}})},b=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",o((function(e){return e.push(n),(0,s["default"])(e)}))},k=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,h();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),m.upload({file:{file:t},request:{exitDataFn:f,uploadFn:g,completeFn:E,callback:b},lifecycle:{reading:k}}))};return i["default"].createElement(i["default"].Fragment,null,i["default"].createElement("input",{onChange:y,style:{display:"none"},type:"file",ref:e}),i["default"].createElement("p",null,v?"":"\u53ea\u6709\u5728\u672c\u5730\u5f00\u53d1\u73af\u5883\u4e0b\u672c\u793a\u4f8b\u624d\u53ef\u6267\u884c\uff08\u5e76\u4e14\u9700\u8981\u5728\u672c\u5730\u542f\u52a8\u540e\u53f0\u670d\u52a1\uff1a\u6267\u884c npm run server\uff09"),i["default"].createElement("p",null,"\u4e0a\u4f20\u5b8c\u6210\u7684\u6587\u4ef6\u53ef\u5728\u5f53\u524d\u9879\u76ee\u76ee\u5f55\u4e0b\u9762\u7684",i["default"].createElement("strong",null,"/mock_data/server/upload"),"\u67e5\u770b"),i["default"].createElement(a["default"],{disabled:!v,onClick:p},"\u70b9\u51fb\u4e0a\u4f20"),i["default"].createElement("ul",{style:{marginTop:24}},i["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return i["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",g);case 51:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n  import axios from \'axios\'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  const isDevelopmentEnv = process.env.NODE_ENV === "development"\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async (data) => {\n      const size = data.size\n      return axios.get(\'/api/check\', {\n        params: data\n      })\n      .then(data => {\n        const res = data.data.res\n        const isExists = res.data === false \n        setProcessMessageList(prev => {\n          prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d\uff0c\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff1a${isExists ? "" : "\u4e0d"}\u5b58\u5728`)\n          return prev \n        })\n        return isExists ? { data: size } : res \n      })\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return axios.post(\'/api/load\', data)\n      .then(data => data.data.res)\n    }\n\n    const completeFn = ({ md5 }) => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n      return axios.get(\'/api/complete\', {\n        params: {\n          md5\n        }\n      })\n    }\n\n    const callback = (error) => {\n      let message = ""\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = "\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <p>{isDevelopmentEnv ? "" : "\u53ea\u6709\u5728\u672c\u5730\u5f00\u53d1\u73af\u5883\u4e0b\u672c\u793a\u4f8b\u624d\u53ef\u6267\u884c\uff08\u5e76\u4e14\u9700\u8981\u5728\u672c\u5730\u542f\u52a8\u540e\u53f0\u670d\u52a1\uff1a\u6267\u884c npm run server\uff09"}</p>\n        <p>\u4e0a\u4f20\u5b8c\u6210\u7684\u6587\u4ef6\u53ef\u5728\u5f53\u524d\u9879\u76ee\u76ee\u5f55\u4e0b\u9762\u7684<strong>/mock_data/server/upload</strong>\u67e5\u770b</p>\n        <Button disabled={!isDevelopmentEnv} onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }\n'}},dependencies:{antd:{version:"4.16.13",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.8"},axios:{version:"0.21.4"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-13"}}}},x2v5:function(e){e.exports=JSON.parse("{}")}}]);