(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"9kvl":function(e,n,t){"use strict";var r=t("FfOG");t.d(n,"a",(function(){return r["b"]}));t("bCY9")},afA6:function(e,n,t){"use strict";t.r(n);var r=t("0Owb"),a=t("cDcd"),s=t.n(a),u=t("q3YX"),i=t("9og8"),c=t("WmNS"),l=t.n(c),o=t("LtsZ"),f={"use-demo":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=f(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},f=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(6).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,Promise.resolve().then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.next=37,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 37:return o=e.sent,d=new o.Upload,m=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.useRef)(),n=(0,c.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],f=function(){e.current.click()},p=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,u,i,c,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),u=d.getTask(t),i=u.file.size,c=u.config.chunkSize,l=c*Number(a),o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=8,m();case 8:return e.abrupt("return",{data:l>i?i:l});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){o((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)}))},g=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",o((function(e){return e.push(n),(0,s["default"])(e)}))},w=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),d.upload({file:{file:t},request:{exitDataFn:p,uploadFn:h,completeFn:v,callback:g},lifecycle:{reading:w}}))};return c["default"].createElement(c["default"].Fragment,null,c["default"].createElement("input",{onChange:y,style:{display:"none"},type:"file",ref:e}),c["default"].createElement(a["default"],{onClick:f},"\u70b9\u51fb\u4e0a\u4f20"),c["default"].createElement("ul",{style:{marginTop:24}},c["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return c["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 42:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = \"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }\n"}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo"}},"use-demo-1":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=f(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},f=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(6).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,Promise.resolve().then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.next=37,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 37:return o=e.sent,d=new o.Upload,m=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.useRef)(),n=(0,c.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],f=function(){e.current.click()},p=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return e.abrupt("return",{data:0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,s,u,i,c;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),s=d.getTask(t),u=s.file.size,i=s.config.chunkSize,c=i*Number(a),e.next=7,m();case 7:return e.abrupt("return",{data:c>u?u:c});case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",o((function(e){return e.push(n),(0,s["default"])(e)}))},g=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u524d"),(0,s["default"])(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u524d"),(0,s["default"])(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.isExists,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u5b8c\u6210\uff0c\u6587\u4ef6".concat(t?"":"\u4e0d","\u5b58\u5728")),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d\uff0c\u5f53\u524d\u5206\u7247: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u4fdd\u5b58"),(0,s["default"])(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,i["default"])(r["default"].mark((function e(n){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u4fdd\u5b58\u6210\u529f"),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),M=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),d.upload({file:{file:t},request:{exitDataFn:p,uploadFn:h,callback:v},lifecycle:{beforeRead:g,reading:w,beforeCheck:y,afterCheck:x,uploading:k,beforeComplete:b,afterComplete:P}}))};return c["default"].createElement(c["default"].Fragment,null,c["default"].createElement("input",{onChange:M,style:{display:"none"},type:"file",ref:e}),c["default"].createElement(a["default"],{onClick:f},"\u70b9\u51fb\u4e0a\u4f20"),c["default"].createElement("ul",{style:{marginTop:24}},c["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return c["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 42:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const callback = (error) => {\n      let message = ""\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = "\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const beforeRead = async () => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u524d`)\n        return [\n          ...prev\n        ]  \n      })\n    } \n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const beforeCheck = async () => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u524d`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const afterCheck = async ({ isExists }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u5b8c\u6210\uff0c\u6587\u4ef6${isExists ? "" : "\u4e0d"}\u5b58\u5728`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const uploading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d\uff0c\u5f53\u524d\u5206\u7247: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const beforeComplete = async () => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u4fdd\u5b58`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const afterComplete = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u4fdd\u5b58\u6210\u529f`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          callback\n        },\n        lifecycle: {\n          beforeRead,\n          reading,\n          beforeCheck,\n          afterCheck,\n          uploading,\n          beforeComplete,\n          afterComplete\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }\n'}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-1"}},"use-demo-2":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=f(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},f=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(6).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,Promise.resolve().then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.next=37,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 37:return o=e.sent,d=new o.Upload,m=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.useRef)(),n=(0,c.useState)([]),t=(0,u["default"])(n,2),l=t[0],f=t[1],p=function(){e.current.click()},h=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,u,i,c,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),u=d.getTask(t),i=u.file.size,c=u.config.chunkSize,l=c*Number(a),f((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=8,m();case 8:return e.abrupt("return",{data:l>i?i:l});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=function(){f((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)}))},w=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",f((function(e){return e.push(n),(0,s["default"])(e)}))},y=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:f((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t,a,s;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=(0,u["default"])(n.target.files,1),a=t[0],a){e.next=3;break}return e.abrupt("return");case 3:return f([]),e.next=6,o.Upload.file2Blob(a);case 6:s=e.sent,d.upload({file:{file:s},request:{exitDataFn:h,uploadFn:v,completeFn:g,callback:w},lifecycle:{reading:y}});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return c["default"].createElement(c["default"].Fragment,null,c["default"].createElement("input",{onChange:x,style:{display:"none"},type:"file",ref:e}),c["default"].createElement("p",null,"\u6587\u4ef6\u4f1a\u88ab\u8f6c\u6362\u6210",c["default"].createElement("strong",null,"Blob"),"\u683c\u5f0f"),c["default"].createElement(a["default"],{onClick:p},"\u70b9\u51fb\u4e0a\u4f20"),c["default"].createElement("ul",{style:{marginTop:24}},c["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return c["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 42:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = \"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = async (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      const blobFile = await Upload.file2Blob(file)\n      UploadInstance.upload({\n        file: {\n          file: blobFile,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <p>\u6587\u4ef6\u4f1a\u88ab\u8f6c\u6362\u6210<strong>Blob</strong>\u683c\u5f0f</p>\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  } "}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-2"}},"use-demo-3":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=f(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},f=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(6).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,Promise.resolve().then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.next=37,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 37:return o=e.sent,d=new o.Upload,m=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.useRef)(),n=(0,c.useState)([]),t=(0,u["default"])(n,2),l=t[0],f=t[1],p=function(){e.current.click()},h=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,u,i,c,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),u=d.getTask(t),i=u.file.size,c=u.config.chunkSize,l=c*Number(a),f((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=8,m();case 8:return e.abrupt("return",{data:l>i?i:l});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=function(){f((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)}))},w=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",f((function(e){return e.push(n),(0,s["default"])(e)}))},y=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:f((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t,a,s;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=(0,u["default"])(n.target.files,1),a=t[0],a){e.next=3;break}return e.abrupt("return");case 3:return f([]),e.next=6,o.Upload.file2arraybuffer(a);case 6:s=e.sent,d.upload({file:{file:s,mime:a.type},request:{exitDataFn:h,uploadFn:v,completeFn:g,callback:w},lifecycle:{reading:y}});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return c["default"].createElement(c["default"].Fragment,null,c["default"].createElement("input",{onChange:x,style:{display:"none"},type:"file",ref:e}),c["default"].createElement("p",null,"\u6587\u4ef6\u4f1a\u88ab\u8f6c\u6362\u6210",c["default"].createElement("strong",null,"ArrayBuffer"),"\u683c\u5f0f"),c["default"].createElement(a["default"],{onClick:p},"\u70b9\u51fb\u4e0a\u4f20"),c["default"].createElement("ul",{style:{marginTop:24}},c["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return c["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 42:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = \"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = async (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      const bufferFile = await Upload.file2arraybuffer(file)\n      UploadInstance.upload({\n        file: {\n          file: bufferFile,\n          mime: file.type \n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <p>\u6587\u4ef6\u4f1a\u88ab\u8f6c\u6362\u6210<strong>ArrayBuffer</strong>\u683c\u5f0f</p>\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  } "}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-3"}},"use-demo-4":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h,v;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=p(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},p=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.next=17,t.e(11).then(t.t.bind(null,"tL+A",7));case 17:return e.t4=n,e.next=20,Promise.all([t.e(0),t.e(1)]).then(t.t.bind(null,"QpBz",7));case 20:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=25,t.e(6).then(t.bind(null,"oBTY"));case 25:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=30,Promise.resolve().then(t.bind(null,"tJVT"));case 30:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=n,e.next=35,Promise.resolve().then(t.bind(null,"9og8"));case 35:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.t12=d,e.next=40,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 40:return e.t13=e.sent,o=(0,e.t12)(e.t13),e.next=44,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 44:return f=e.sent,m=new f.Upload,h=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.useRef)(),n=(0,o.useState)([]),t=(0,i["default"])(n,2),l=t[0],p=t[1],d=function(){e.current.click()},v=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,h();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,s,i,c,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),s=m.getTask(t),i=s.file.size,c=s.config.chunkSize,l=c*Number(a),p((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,u["default"])(e)})),e.next=8,h();case 8:return e.abrupt("return",{data:l>i?i:l});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),w=function(){p((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,u["default"])(e)}))},y=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",p((function(e){return e.push(n),(0,u["default"])(e)}))},x=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,h();case 3:p((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,u["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t,a,u;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=(0,i["default"])(n.target.files,1),a=t[0],a){e.next=3;break}return e.abrupt("return");case 3:if(!(a.size>512e3)){e.next=6;break}return s["default"].info("\u6587\u4ef6\u8fc7\u5927"),e.abrupt("return");case 6:return p([]),e.next=9,f.Upload.file2base64(a);case 9:u=e.sent,m.upload({file:{file:u,mime:a.type},request:{exitDataFn:v,uploadFn:g,completeFn:w,callback:y},lifecycle:{reading:x}});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o["default"].createElement(o["default"].Fragment,null,o["default"].createElement("input",{onChange:k,style:{display:"none"},type:"file",ref:e}),o["default"].createElement("p",null,"\u6587\u4ef6\u4f1a\u88ab\u8f6c\u6362\u6210",o["default"].createElement("strong",null,"Base64"),"\u683c\u5f0f"),o["default"].createElement("p",null,"\u5c3d\u91cf\u4e0a\u4f20\u5c0f\u4e00\u70b9\u7684\u6587\u4ef6"),o["default"].createElement(a["default"],{onClick:d},"\u70b9\u51fb\u4e0a\u4f20"),o["default"].createElement("ul",{style:{marginTop:24}},o["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return o["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",v);case 49:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button, message } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = ""\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = "\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = async (e) => {\n      const [ file ] = e.target.files\n      if(!file) return\n      if(file.size > 1024 * 500) {\n        message.info("\u6587\u4ef6\u8fc7\u5927")\n        return \n      }  \n      setProcessMessageList([])\n      const base64File = await Upload.file2base64(file)\n      UploadInstance.upload({\n        file: {\n          file: base64File,\n          mime: file.type,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <p>\u6587\u4ef6\u4f1a\u88ab\u8f6c\u6362\u6210<strong>Base64</strong>\u683c\u5f0f</p>\n        <p>\u5c3d\u91cf\u4e0a\u4f20\u5c0f\u4e00\u70b9\u7684\u6587\u4ef6</p>\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  } '}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-4"}},"use-demo-5":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h,v;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=p(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},p=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(22).then(t.t.bind(null,"5Nzg",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(21)]).then(t.t.bind(null,"CgBw",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.next=17,t.e(3).then(t.t.bind(null,"MaXC",7));case 17:return e.t4=n,e.next=20,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 20:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.next=24,t.e(11).then(t.t.bind(null,"tL+A",7));case 24:return e.t6=n,e.next=27,Promise.all([t.e(0),t.e(1)]).then(t.t.bind(null,"QpBz",7));case 27:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=32,Promise.resolve().then(t.bind(null,"tJVT"));case 32:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=n,e.next=37,Promise.resolve().then(t.bind(null,"9og8"));case 37:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.t12=d,e.next=42,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 42:return e.t13=e.sent,o=(0,e.t12)(e.t13),e.next=46,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 46:return f=e.sent,m=new f.Upload,h=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.useRef)(),n=(0,o.useState)(0),t=(0,i["default"])(n,2),l=t[0],f=t[1],p=!1,d=function(){e.current.click()},v=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f((function(e){return 0})),e.next=3,h();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,s,u,i,c;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),s=m.getTask(t),u=s.file.size,i=s.config.chunkSize,c=i*Number(a),c=c>u?u:c,f((function(e){return c/u})),e.next=9,h();case 9:return e.abrupt("return",{data:c});case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),w=function(){f((function(e){return 1}))},y=function(e){e?(u["default"].error("\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error)),p=!0):u["default"].info("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"),f((function(e){return e}))},x=function(e){var n=(0,i["default"])(e.target.files,1),t=n[0];t&&(f(0),m.upload({file:{file:t},request:{exitDataFn:v,uploadFn:g,completeFn:w,callback:y}}))};return o["default"].createElement(o["default"].Fragment,null,o["default"].createElement("input",{onChange:x,style:{display:"none"},type:"file",ref:e}),o["default"].createElement(s["default"],{onClick:d},"\u70b9\u51fb\u4e0a\u4f20"),o["default"].createElement("p",null,"\u4e0a\u4f20\u8fdb\u5ea6"),o["default"].createElement("div",{style:{width:"60%"}},o["default"].createElement(a["default"],{percent:100*l,status:p?"exception":void 0})))},e.abrupt("return",v);case 51:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button, Progress, message } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ process, setProcess ] = useState(0)\n    let isError = false \n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcess(_ => {\n        return 0 \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      let nextOffset = chunkSize * Number(index)\n      nextOffset = nextOffset > size ? size : nextOffset \n      setProcess(_ => {\n        return nextOffset / size \n      })\n      await sleep()\n      return {\n        data: nextOffset\n      }\n    }\n\n    const completeFn = () => {\n      setProcess(_ => {\n        return 1\n      })\n    }\n\n    const callback = (error) => {\n      if(error) {\n        message.error(`\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`)\n        isError = true \n      }else {\n        message.info("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f")\n      }\n      setProcess(prev => {\n        return prev\n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcess(0)\n      UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <p>\u4e0a\u4f20\u8fdb\u5ea6</p>\n        <div style={{width: "60%"}}>\n          <Progress percent={process * 100} status={isError ? "exception" : undefined} />\n        </div>\n      </>\n    )\n\n  }'}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-5"}},"use-demo-6":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h,v;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=p(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},p=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(12).then(t.t.bind(null,"lfLe",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(10)]).then(t.t.bind(null,"Cp9S",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.next=17,t.e(3).then(t.t.bind(null,"MaXC",7));case 17:return e.t4=n,e.next=20,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 20:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=25,t.e(6).then(t.bind(null,"oBTY"));case 25:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=30,Promise.resolve().then(t.bind(null,"tJVT"));case 30:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=n,e.next=35,Promise.resolve().then(t.bind(null,"9og8"));case 35:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.t12=d,e.next=40,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 40:return e.t13=e.sent,o=(0,e.t12)(e.t13),e.next=44,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 44:return f=e.sent,m=new f.Upload,h=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.useRef)(),n=(0,o.useState)([]),t=(0,i["default"])(n,2),l=t[0],f=t[1],p=(0,o.useState)(!1),d=(0,i["default"])(p,2),v=d[0],g=d[1],w=(0,o.useState)(!1),y=(0,i["default"])(w,2),x=y[0],k=y[1],b=(0,o.useState)([]),P=(0,i["default"])(b,2),M=P[0],S=P[1],O=function(){e.current.click()},F=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d, ".concat((new Date).toString())),e})),e.next=3,h();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,s,i,c,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),s=m.getTask(t),i=s.file.size,c=s.config.chunkSize,l=c*Number(a),f((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247, ").concat((new Date).toString())),(0,u["default"])(e)})),e.next=8,h();case 8:return e.abrupt("return",{data:l>i?i:l});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),D=function(){f((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d, ".concat((new Date).toString())),(0,u["default"])(e)}))},T=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error,", ").concat((new Date).toString()):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f, ".concat((new Date).toString()),f((function(e){return e.push(n),(0,u["default"])(e)}))},U=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,h();case 3:f((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t,", ").concat((new Date).toString())),(0,u["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:f((function(e){return e.push("\u4efb\u52a1\u4e0a\u4f20\u6682\u505c, ".concat((new Date).toString())),(0,u["default"])(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:f((function(e){return e.push("\u4efb\u52a1\u4e0a\u4f20\u53d6\u6d88, ".concat((new Date).toString())),(0,u["default"])(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e){var n=(0,i["default"])(e.target.files,1),t=n[0];if(t){f([]);var r=m.upload({file:{file:t},request:{exitDataFn:F,uploadFn:L,completeFn:D,callback:T},lifecycle:{reading:U,afterStop:C,afterCancel:z}});S(r)}},E=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t,a,s;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=(0,i["default"])(M,1),t=n[0],!x&&t){e.next=3;break}return e.abrupt("return");case 3:return k(!0),a=v?m.start:m.stop,s=v?"\u4f60\u6267\u884c\u4e86\u7ee7\u7eed\u4e0a\u4f20\u64cd\u4f5c":"\u4f60\u6267\u884c\u4e86\u6682\u505c\u4e0a\u4f20\u64cd\u4f5c",e.next=8,h();case 8:a.call(m,t),g((function(e){return!e})),f((function(e){return e.push("".concat(s,", ").concat((new Date).toString())),e})),k(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t,a,s,u,c;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=(0,i["default"])(M,1),t=n[0],!x&&t){e.next=3;break}return e.abrupt("return");case 3:return k(!0),a=m.getTask(t),s=a.tool.file.isTaskCancelAdd(),u=s?m.cancelAdd:m.cancel,c=s?"\u4f60\u6267\u884c\u4e86\u53d6\u6d88\u6dfb\u52a0\u4efb\u52a1\u64cd\u4f5c":"\u4f60\u6267\u884c\u4e86\u53d6\u6d88\u4efb\u52a1\u4e0a\u4f20\u64cd\u4f5c",e.next=10,h();case 10:u.call(m,t),f((function(e){return e.push("".concat(c,", ").concat((new Date).toString())),e})),S([]),k(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o["default"].createElement(o["default"].Fragment,null,o["default"].createElement("input",{onChange:j,style:{display:"none"},type:"file",ref:e}),o["default"].createElement(a["default"],null,o["default"].createElement(s["default"],{loading:x,onClick:O},"\u70b9\u51fb\u4e0a\u4f20"),o["default"].createElement(s["default"],{loading:x,onClick:E},v?"\u7ee7\u7eed\u4e0a\u4f20":"\u6682\u505c\u4e0a\u4f20"),o["default"].createElement(s["default"],{loading:x,onClick:R},"\u53d6\u6d88\u4e0a\u4f20")),o["default"].createElement("ul",{style:{marginTop:24}},o["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return o["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",v);case 49:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button, Space } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n    const [ isStop, setIsStop ] = useState(false)\n    const [ loading, setLoading ] = useState(false)\n    const [ fileList, setFileList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d, ${new Date().toString()}`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247, ${new Date().toString()}`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d, ${new Date().toString()}`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = ""\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}, ${new Date().toString()}`\n      }else {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u6210\u529f, ${new Date().toString()}`\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const afterStop = async () => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u4efb\u52a1\u4e0a\u4f20\u6682\u505c, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const afterCancel = async () => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u4efb\u52a1\u4e0a\u4f20\u53d6\u6d88, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      const result = UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading,\n          afterStop,\n          afterCancel\n        }\n      })\n      setFileList(result)\n    }\n\n    const handleStop = async () => {\n       const [ fileName ] = fileList\n      if(loading || !fileName) return \n      setLoading(true)\n      const method = isStop ? UploadInstance.start : UploadInstance.stop \n      const message = isStop ? "\u4f60\u6267\u884c\u4e86\u7ee7\u7eed\u4e0a\u4f20\u64cd\u4f5c" : "\u4f60\u6267\u884c\u4e86\u6682\u505c\u4e0a\u4f20\u64cd\u4f5c"\n      await sleep()\n      method.call(UploadInstance, fileName)\n      setIsStop(prev => !prev)\n      setProcessMessageList(prev => {\n        prev.push(`${message}, ${new Date().toString()}`)\n        return prev \n      })\n      setLoading(false)\n    }\n\n    const handleCancel = async () => {\n      const [ fileName ] = fileList\n      if(loading || !fileName) return \n      setLoading(true)\n      const task = UploadInstance.getTask(fileName)\n      const isTaskCancelAdd = task.tool.file.isTaskCancelAdd()\n      const method = isTaskCancelAdd ? UploadInstance.cancelAdd : UploadInstance.cancel \n      const message = isTaskCancelAdd ? "\u4f60\u6267\u884c\u4e86\u53d6\u6d88\u6dfb\u52a0\u4efb\u52a1\u64cd\u4f5c" : "\u4f60\u6267\u884c\u4e86\u53d6\u6d88\u4efb\u52a1\u4e0a\u4f20\u64cd\u4f5c"\n      await sleep()\n      method.call(UploadInstance, fileName)\n      setProcessMessageList(prev => {\n        prev.push(`${message}, ${new Date().toString()}`)\n        return prev \n      })\n      setFileList([])\n      setLoading(false)\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <Space>\n          <Button loading={loading} onClick={handleUpload}>\n            \u70b9\u51fb\u4e0a\u4f20\n          </Button>\n          <Button loading={loading} onClick={handleStop}>\n            {\n              isStop ? "\u7ee7\u7eed\u4e0a\u4f20" : "\u6682\u505c\u4e0a\u4f20"\n            }\n          </Button>\n          <Button loading={loading} onClick={handleCancel}>\n            \u53d6\u6d88\u4e0a\u4f20\n          </Button>\n        </Space>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }'}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-6"}},"use-demo-7":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=f(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},f=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(6).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,Promise.resolve().then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.next=37,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 37:return o=e.sent,d=new o.Upload,m=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.useRef)(),n=(0,c.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],f=0,p=function(){e.current.click()},h=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d, ".concat((new Date).toString())),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,u,i,c,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(f++,!(f<=2)){e.next=3;break}throw new Error("\u4e0a\u4f20\u5931\u8d25\u91cd\u8bd5\u6d4b\u8bd5");case 3:return a=n.get("index"),u=d.getTask(t),i=u.file.size,c=u.config.chunkSize,l=c*Number(a),o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247, ").concat((new Date).toString())),(0,s["default"])(e)})),e.next=11,m();case 11:return e.abrupt("return",{data:l>i?i:l});case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=function(){o((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d, ".concat((new Date).toString())),(0,s["default"])(e)}))},w=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error,", ").concat((new Date).toString()):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f, ".concat((new Date).toString()),o((function(e){return e.push(n),(0,s["default"])(e)}))},y=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t,", ").concat((new Date).toString())),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u91cd\u8bd5, ".concat((new Date).toString())),(0,s["default"])(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),d.upload({config:{retry:{times:2}},file:{file:t},request:{exitDataFn:h,uploadFn:v,completeFn:g,callback:w},lifecycle:{reading:y,retry:x}}))};return c["default"].createElement(c["default"].Fragment,null,c["default"].createElement("input",{onChange:k,style:{display:"none"},type:"file",ref:e}),c["default"].createElement("p",null,"\u4ee5\u4e0b\u4e0a\u4f20\u6d41\u7a0b\u4f1a\u51fa\u73b0\u4e24\u6b21\u4e0a\u4f20\u5931\u8d25"),c["default"].createElement(a["default"],{onClick:p},"\u70b9\u51fb\u4e0a\u4f20"),c["default"].createElement("ul",{style:{marginTop:24}},c["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return c["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 42:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n    let errorTimes = 0 \n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d, ${new Date().toString()}`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      errorTimes ++ \n      if(errorTimes <= 2) {\n        throw new Error(\"\u4e0a\u4f20\u5931\u8d25\u91cd\u8bd5\u6d4b\u8bd5\")\n      }\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247, ${new Date().toString()}`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d, ${new Date().toString()}`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}, ${new Date().toString()}`\n      }else {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u6210\u529f, ${new Date().toString()}`\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const retry = async () => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u91cd\u8bd5, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        config: {\n          retry: {\n            times: 2\n          }\n        },\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading,\n          retry \n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <p>\u4ee5\u4e0b\u4e0a\u4f20\u6d41\u7a0b\u4f1a\u51fa\u73b0\u4e24\u6b21\u4e0a\u4f20\u5931\u8d25</p>\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }\n"}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-7"}},"use-demo-8":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=f(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},f=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(6).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,Promise.resolve().then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.next=37,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 37:return o=e.sent,d=new o.Upload,m=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.useRef)(),n=(0,c.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],f=function(){e.current.click()},p=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,u,i,c,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),u=d.getTask(t),i=u.file.size,c=u.config.chunkSize,l=c*Number(a),o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=8,m();case 8:return e.abrupt("return",{data:l>i?i:l});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){o((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)}))},g=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",o((function(e){return e.push(n),(0,s["default"])(e)}))},w=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),d.upload({config:{chunkSize:10485760},file:{file:t},request:{exitDataFn:p,uploadFn:h,completeFn:v,callback:g},lifecycle:{reading:w}}))};return c["default"].createElement(c["default"].Fragment,null,c["default"].createElement("input",{onChange:y,style:{display:"none"},type:"file",ref:e}),c["default"].createElement("p",null,"\u8bbe\u7f6e\u5206\u7247\u5927\u5c0f\u4e3a",c["default"].createElement("strong",null,"10M")),c["default"].createElement(a["default"],{onClick:f},"\u70b9\u51fb\u4e0a\u4f20"),c["default"].createElement("ul",{style:{marginTop:24}},c["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return c["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 42:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = \"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        config: {\n          chunkSize: 1024 * 1024 * 10\n        },\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <p>\u8bbe\u7f6e\u5206\u7247\u5927\u5c0f\u4e3a<strong>10M</strong></p>\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }"}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-8"}},"use-demo-9":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=f(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},f=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(6).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,Promise.resolve().then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.next=37,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 37:return o=e.sent,d=new o.Upload,m=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.useRef)(),n=(0,c.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],f=function(){e.current.click()},p=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,u,i,c,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),u=d.getTask(t),i=u.file.size,c=u.config.chunkSize,l=c*Number(a),o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=8,m();case 8:return e.abrupt("return",{data:l>i?i:l});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){o((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)}))},g=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",o((function(e){return e.push(n),(0,s["default"])(e)}))},w=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),d.upload({config:{parseIgnore:!0},file:{file:t},request:{exitDataFn:p,uploadFn:h,completeFn:v,callback:g},lifecycle:{reading:w}}))};return c["default"].createElement(c["default"].Fragment,null,c["default"].createElement("input",{onChange:y,style:{display:"none"},type:"file",ref:e}),c["default"].createElement("p",null,"\u4ee5\u4e0b\u4e0d\u4f1a\u663e\u793a\u89e3\u6790\u7684\u8fdb\u5ea6\u4fe1\u606f"),c["default"].createElement(a["default"],{onClick:f},"\u70b9\u51fb\u4e0a\u4f20"),c["default"].createElement("ul",{style:{marginTop:24}},c["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return c["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 42:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = \"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        config: {\n          parseIgnore: true \n        },\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <p>\u4ee5\u4e0b\u4e0d\u4f1a\u663e\u793a\u89e3\u6790\u7684\u8fdb\u5ea6\u4fe1\u606f</p>\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }"}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-9"}},"use-demo-10":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h,v,g;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=p(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},p=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.next=17,Promise.all([t.e(3),t.e(23)]).then(t.t.bind(null,"cUip",7));case 17:return e.t4=n,e.next=20,Promise.all([t.e(0),t.e(1),t.e(9),t.e(2),t.e(20)]).then(t.t.bind(null,"iJl9",7));case 20:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=25,t.e(6).then(t.bind(null,"oBTY"));case 25:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=30,Promise.resolve().then(t.bind(null,"tJVT"));case 30:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=n,e.next=35,Promise.resolve().then(t.bind(null,"9og8"));case 35:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.t12=d,e.next=40,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 40:return e.t13=e.sent,o=(0,e.t12)(e.t13),e.next=44,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 44:return f=e.sent,m=new f.Upload,h=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){return"string"===typeof e&&/([a-f\d]{32}|[A-F\d]{32})/.test(e)},g=function(){var e=(0,o.useRef)(),n=(0,o.useState)([]),t=(0,i["default"])(n,2),l=t[0],f=t[1],p=(0,o.useState)(""),d=(0,i["default"])(p,2),g=d[0],w=d[1],y=function(){e.current.click()},x=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,h();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,s,i,c,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),s=m.getTask(t),i=s.file.size,c=s.config.chunkSize,l=c*Number(a),f((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,u["default"])(e)})),e.next=8,h();case 8:return e.abrupt("return",{data:l>i?i:l});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),b=function(){f((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,u["default"])(e)}))},P=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",f((function(e){return e.push(n),(0,u["default"])(e)}))},M=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,h();case 3:f((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,u["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),S=function(e){var n=(0,i["default"])(e.target.files,1),t=n[0];t&&(f([]),m.upload({file:{file:t,md5:g},request:{exitDataFn:x,uploadFn:k,completeFn:b,callback:P},lifecycle:{reading:M}}))};return o["default"].createElement(o["default"].Fragment,null,o["default"].createElement("input",{onChange:S,style:{display:"none"},type:"file",ref:e}),o["default"].createElement("p",null,"\u63d0\u524d\u4f20\u5165\u6587\u4ef6",o["default"].createElement("strong",null,"md5"),"\u914d\u7f6e"),o["default"].createElement("p",null,"\u4ee5\u4e0b\u4e0a\u4f20\u6d41\u7a0b\u4f1a\u8df3\u8fc7\u6587\u4ef6\u89e3\u6790\u8fc7\u7a0b"),o["default"].createElement(s["default"],{value:g,onChange:function(e){return w(e.target.value)},placeholder:"\u8bf7\u5148\u5199\u5165\u8981\u4e0a\u4f20\u6587\u4ef6\u7684md5"}),o["default"].createElement(a["default"],{onClick:y,disabled:!v(g)},"\u70b9\u51fb\u4e0a\u4f20"),o["default"].createElement("ul",{style:{marginTop:24}},o["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return o["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",g);case 50:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button, Input } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n\n  const UploadInstance = new Upload() \n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n  const isMd5 = (str) => typeof str === \'string\' && /([a-f\\d]{32}|[A-F\\d]{32})/.test(str)\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n    const [ md5, setMd5 ] = useState("")\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = ""\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = "\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        file: {\n          file,\n          md5\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <p>\u63d0\u524d\u4f20\u5165\u6587\u4ef6<strong>md5</strong>\u914d\u7f6e</p>\n        <p>\u4ee5\u4e0b\u4e0a\u4f20\u6d41\u7a0b\u4f1a\u8df3\u8fc7\u6587\u4ef6\u89e3\u6790\u8fc7\u7a0b</p>\n        <Input value={md5} onChange={e => setMd5(e.target.value)} placeholder="\u8bf7\u5148\u5199\u5165\u8981\u4e0a\u4f20\u6587\u4ef6\u7684md5" />\n        <Button onClick={handleUpload} disabled={!isMd5(md5)}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }'}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-10"}},"use-demo-11":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h,v;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=p(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},p=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(12).then(t.t.bind(null,"lfLe",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(10)]).then(t.t.bind(null,"Cp9S",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.next=17,t.e(3).then(t.t.bind(null,"MaXC",7));case 17:return e.t4=n,e.next=20,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 20:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=25,t.e(6).then(t.bind(null,"oBTY"));case 25:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=30,Promise.resolve().then(t.bind(null,"tJVT"));case 30:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=n,e.next=35,Promise.resolve().then(t.bind(null,"9og8"));case 35:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.t12=d,e.next=40,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 40:return e.t13=e.sent,o=(0,e.t12)(e.t13),e.next=44,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 44:return f=e.sent,m=new f.Upload,h=function(){var e=(0,c["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.useRef)(),n=(0,o.useState)([]),t=(0,i["default"])(n,2),l=t[0],f=t[1],p=(0,o.useState)(null),d=(0,i["default"])(p,2),v=d[0],g=d[1],w=function(){e.current.click()},y=function(){var e=(0,c["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d, ".concat((new Date).toString())),e})),e.next=3,h();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,c["default"])(r["default"].mark((function e(n,t){var a,s,i,c,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),s=m.getTask(t),i=s.file.size,c=s.config.chunkSize,l=c*Number(a),f((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247, ").concat((new Date).toString())),(0,u["default"])(e)})),e.next=8,h();case 8:return e.abrupt("return",{data:l>i?i:l});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),k=function(){f((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d, ".concat((new Date).toString())),(0,u["default"])(e)}))},b=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error,", ").concat((new Date).toString()):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f, ".concat((new Date).toString()),f((function(e){return e.push(n),(0,u["default"])(e)}))},P=function(){var e=(0,c["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,h();case 3:f((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t,", ").concat((new Date).toString())),(0,u["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),M=function(){f((function(e){return e.push("\u6062\u590d\u6587\u4ef6\u4e0a\u4f20, ".concat((new Date).toString())),(0,u["default"])(e)})),m.resumeTask(v),m.deal(v.symbol)},S=function(e){var n=(0,i["default"])(e.target.files,1),t=n[0];if(t){f([]),g(null);var r=m.upload({file:{file:t},request:{exitDataFn:y,uploadFn:x,completeFn:k,callback:b},lifecycle:{reading:P}}),a=(0,i["default"])(r,1),s=a[0],u=m.getTask(s);g(u)}};return o["default"].createElement(o["default"].Fragment,null,o["default"].createElement("input",{onChange:S,style:{display:"none"},type:"file",ref:e}),o["default"].createElement(a["default"],null,o["default"].createElement(s["default"],{onClick:w},"\u70b9\u51fb\u4e0a\u4f20"),o["default"].createElement(s["default"],{onClick:M,disabled:!v||v.tool.file.isTaskDealing()},"\u6062\u590d\u4e0a\u4f20")),o["default"].createElement("ul",{style:{marginTop:24}},o["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return o["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",v);case 49:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:"  import React, { useRef, useState } from 'react'\n  import { Button, Space } from 'antd'\n  import { Upload } from 'chunk-file-upload'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n    const [ task, setTask ] = useState(null)\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d, ${new Date().toString()}`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get(\"index\")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247, ${new Date().toString()}`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d, ${new Date().toString()}`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = \"\"\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}, ${new Date().toString()}`\n      }else {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u6210\u529f, ${new Date().toString()}`\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const handleResumeUpload = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6062\u590d\u6587\u4ef6\u4e0a\u4f20, ${new Date().toString()}`)\n        return [\n          ...prev\n        ]  \n      })\n      UploadInstance.resumeTask(task)\n      UploadInstance.deal(task.symbol)\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      setTask(null)\n      const [ result ] = UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n      const task = UploadInstance.getTask(result)\n      setTask(task)\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: 'none'}} type=\"file\" ref={inputRef} />\n        <Space>\n          <Button onClick={handleUpload}>\n            \u70b9\u51fb\u4e0a\u4f20\n          </Button>\n          <Button onClick={handleResumeUpload} disabled={!task || task.tool.file.isTaskDealing()}>\n            \u6062\u590d\u4e0a\u4f20\n          </Button>\n        </Space>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }\n"}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-11"}},"use-demo-12":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=f(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},f=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(6).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,Promise.resolve().then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=p,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.next=37,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 37:return o=e.sent,o.Upload.install("slicer",function(){var e=(0,i["default"])(r["default"].mark((function e(n,t,a,s,u){var i;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.Upload.blob2arraybuffer(s.slice(t,a));case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));return function(n,t,r,a,s){return e.apply(this,arguments)}}()),d=new o.Upload,m=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.useRef)(),n=(0,c.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],f=function(){e.current.click()},p=function(){var e=(0,i["default"])(r["default"].mark((function e(){return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d"),e})),e.next=3,m();case 3:return e.abrupt("return",{data:0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a,u,i,c,l;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),u=d.getTask(t),i=u.file.size,c=u.config.chunkSize,l=c*Number(a),o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=8,m();case 8:return e.abrupt("return",{data:l>i?i:l});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){o((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)}))},g=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",o((function(e){return e.push(n),(0,s["default"])(e)}))},w=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,m();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),d.upload({file:{file:t},request:{exitDataFn:p,uploadFn:h,completeFn:v,callback:g},lifecycle:{reading:w}}))};return c["default"].createElement(c["default"].Fragment,null,c["default"].createElement("input",{onChange:y,style:{display:"none"},type:"file",ref:e}),c["default"].createElement(a["default"],{onClick:f},"\u70b9\u51fb\u4e0a\u4f20"),c["default"].createElement("ul",{style:{marginTop:24}},c["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return c["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",h);case 43:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n\n  Upload.install("slicer", async (task, start, end, file, stepValue) => {\n    const result = await Upload.blob2arraybuffer(file.slice(start, end))\n    return result\n  })\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d`)\n        return prev \n      })\n      await sleep()\n      return {\n        data: 0\n      }\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      const task = UploadInstance.getTask(name)\n      const size = task.file.size \n      const chunkSize = task.config.chunkSize \n      const nextOffset = chunkSize * Number(index)\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return {\n        data: nextOffset > size ? size : nextOffset \n      }\n    }\n\n    const completeFn = () => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n    }\n\n    const callback = (error) => {\n      let message = ""\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = "\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <Button onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }\n'}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-12"}},"use-demo-13":{component:Object(o["dynamic"])({loader:function(){var e=Object(i["default"])(l.a.mark((function e(){var n,r,a,s,u,i,c,o,f,p,d,m,h,v,g;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=p(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r},p=function(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:n})(e)},n=t("K+nK"),e.t0=n,e.next=6,Promise.resolve().then(t.t.bind(null,"WmNS",7));case 6:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=10,t.e(3).then(t.t.bind(null,"MaXC",7));case 10:return e.t2=n,e.next=13,Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.t.bind(null,"4IMT",7));case 13:return e.t3=e.sent,a=(0,e.t2)(e.t3),e.t4=n,e.next=18,t.e(6).then(t.bind(null,"oBTY"));case 18:return e.t5=e.sent,s=(0,e.t4)(e.t5),e.t6=n,e.next=23,Promise.resolve().then(t.bind(null,"tJVT"));case 23:return e.t7=e.sent,u=(0,e.t6)(e.t7),e.t8=n,e.next=28,Promise.resolve().then(t.bind(null,"9og8"));case 28:return e.t9=e.sent,i=(0,e.t8)(e.t9),e.t10=d,e.next=33,Promise.resolve().then(t.t.bind(null,"cDcd",7));case 33:return e.t11=e.sent,c=(0,e.t10)(e.t11),e.next=37,Promise.all([t.e(4),t.e(5)]).then(t.bind(null,"/7QA"));case 37:return o=e.sent,e.t12=n,e.next=41,t.e(19).then(t.t.bind(null,"vDqi",7));case 41:return e.t13=e.sent,f=(0,e.t12)(e.t13),m=new o.Upload,h=function(){var e=(0,i["default"])(r["default"].mark((function e(){var n,t=arguments;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=!1,g=function(){var e=(0,c.useRef)(),n=(0,c.useState)([]),t=(0,u["default"])(n,2),l=t[0],o=t[1],p=function(){e.current.click()},d=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.size,e.abrupt("return",f["default"].get("/api/check",{params:n}).then((function(e){var n=e.data.res,r=!1===n.data;return o((function(e){return e.push("\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d\uff0c\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff1a".concat(r?"":"\u4e0d","\u5b58\u5728")),e})),r?{data:t}:n})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=(0,i["default"])(r["default"].mark((function e(n,t){var a;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.get("index"),o((function(e){return e.push("\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c".concat(a,"\u7247")),(0,s["default"])(e)})),e.next=4,h();case 4:return e.abrupt("return",f["default"].post("/api/load",n).then((function(e){return e.data.res})));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),w=function(e){var n=e.md5;return o((function(e){return e.push("\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d"),(0,s["default"])(e)})),f["default"].get("/api/complete",{params:{md5:n}})},y=function(e){var n="";n=e?"\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ".concat(e.error):"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",o((function(e){return e.push(n),(0,s["default"])(e)}))},x=function(){var e=(0,i["default"])(r["default"].mark((function e(n){var t;return r["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.current,e.next=3,h();case 3:o((function(e){return e.push("\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ".concat(t)),(0,s["default"])(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(e){var n=(0,u["default"])(e.target.files,1),t=n[0];t&&(o([]),m.upload({file:{file:t},request:{exitDataFn:d,uploadFn:g,completeFn:w,callback:y},lifecycle:{reading:x}}))};return c["default"].createElement(c["default"].Fragment,null,c["default"].createElement("input",{onChange:k,style:{display:"none"},type:"file",ref:e}),c["default"].createElement("p",null,v?"":"\u53ea\u6709\u5728\u672c\u5730\u5f00\u53d1\u73af\u5883\u4e0b\u672c\u793a\u4f8b\u624d\u53ef\u6267\u884c\uff08\u5e76\u4e14\u9700\u8981\u5728\u672c\u5730\u542f\u52a8\u540e\u53f0\u670d\u52a1\uff1a\u6267\u884c npm run server\uff09"),c["default"].createElement("p",null,"\u4e0a\u4f20\u5b8c\u6210\u7684\u6587\u4ef6\u53ef\u5728\u5f53\u524d\u9879\u76ee\u76ee\u5f55\u4e0b\u9762\u7684",c["default"].createElement("strong",null,"/mock_data/server/upload"),"\u67e5\u770b"),c["default"].createElement(a["default"],{disabled:!v,onClick:p},"\u70b9\u51fb\u4e0a\u4f20"),c["default"].createElement("ul",{style:{marginTop:24}},c["default"].createElement("li",null,"\u4e0a\u4f20\u8fdb\u5ea6: "),l.map((function(e){return c["default"].createElement("li",{key:e},e)}))))},e.abrupt("return",g);case 48:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:'  import React, { useRef, useState } from \'react\'\n  import { Button } from \'antd\'\n  import { Upload } from \'chunk-file-upload\'\n  import axios from \'axios\'\n\n  const UploadInstance = new Upload()\n\n  const sleep = async (times=1000) => new Promise(resolve => setTimeout(resolve, times))\n\n  const isDevelopmentEnv = process.env.NODE_ENV === "development"\n\n  export default () => {\n\n    const inputRef = useRef()\n    const [ processMessageList, setProcessMessageList ] = useState([])\n\n    const handleUpload = () => {\n      inputRef.current.click()\n    }\n\n    const exitDataFn = async (data) => {\n      const size = data.size\n      return axios.get(\'/api/check\', {\n        params: data\n      })\n      .then(data => {\n        const res = data.data.res\n        const isExists = res.data === false \n        setProcessMessageList(prev => {\n          prev.push(`\u6587\u4ef6\u5b58\u5728\u68c0\u67e5\u4e2d\uff0c\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff1a${isExists ? "" : "\u4e0d"}\u5b58\u5728`)\n          return prev \n        })\n        return isExists ? { data: size } : res \n      })\n    }\n\n    const uploadFn = async (data, name) => {\n      const index = data.get("index")\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u4e0a\u4f20\u4e2d: \u7b2c${index}\u7247`)\n        return [\n          ...prev\n        ] \n      })\n      await sleep()\n      return axios.post(\'/api/load\', data)\n      .then(data => data.data.res)\n    }\n\n    const completeFn = ({ md5 }) => {\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u5b8c\u6210\u4fdd\u5b58\u4e2d`)\n        return [\n          ...prev\n        ] \n      })\n      return axios.get(\'/api/complete\', {\n        params: {\n          md5\n        }\n      })\n    }\n\n    const callback = (error) => {\n      let message = ""\n      if(error) {\n        message = `\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519: ${error.error}`\n      }else {\n        message = "\u6587\u4ef6\u4e0a\u4f20\u6210\u529f"\n      }\n      setProcessMessageList(prev => {\n        prev.push(message)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const reading = async ({ current }) => {\n      await sleep()\n      setProcessMessageList(prev => {\n        prev.push(`\u6587\u4ef6\u89e3\u6790\u4e2d\uff0c\u5f53\u524d\u7d22\u5f15: ${current}`)\n        return [\n          ...prev\n        ]  \n      })\n    }\n\n    const onFileChange = (e) => {\n      const [ file ] = e.target.files\n      if(!file) return  \n      setProcessMessageList([])\n      UploadInstance.upload({\n        file: {\n          file,\n        },\n        request: {\n          exitDataFn,\n          uploadFn,\n          completeFn,\n          callback\n        },\n        lifecycle: {\n          reading\n        }\n      })\n    }\n\n    return (\n      <>\n        <input onChange={onFileChange} style={{display: \'none\'}} type="file" ref={inputRef} />\n        <p>{isDevelopmentEnv ? "" : "\u53ea\u6709\u5728\u672c\u5730\u5f00\u53d1\u73af\u5883\u4e0b\u672c\u793a\u4f8b\u624d\u53ef\u6267\u884c\uff08\u5e76\u4e14\u9700\u8981\u5728\u672c\u5730\u542f\u52a8\u540e\u53f0\u670d\u52a1\uff1a\u6267\u884c npm run server\uff09"}</p>\n        <p>\u4e0a\u4f20\u5b8c\u6210\u7684\u6587\u4ef6\u53ef\u5728\u5f53\u524d\u9879\u76ee\u76ee\u5f55\u4e0b\u9762\u7684<strong>/mock_data/server/upload</strong>\u67e5\u770b</p>\n        <Button disabled={!isDevelopmentEnv} onClick={handleUpload}>\n          \u70b9\u51fb\u4e0a\u4f20\n        </Button>\n        <ul style={{marginTop: 24}}>\n          <li>\u4e0a\u4f20\u8fdb\u5ea6: </li>\n          {\n            processMessageList.map(item => {\n              return (\n                <li key={item}> \n                  {item}\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n\n  }\n'}},dependencies:{antd:{version:"4.19.3",css:"antd/dist/antd.css"},react:{version:">=16.9.0"},"chunk-file-upload":{version:"1.0.9"},axios:{version:"0.21.4"},"react-dom":{version:">=16.9.0"}},identifier:"use-demo-13"}}},p=t("x2v5"),d=t("KcUY"),m=t.n(d);n["default"]=e=>s.a.createElement(m.a,Object(r["a"])({},e,{config:u,demos:f,apis:p}))},q3YX:function(e){e.exports=JSON.parse('{"menus":{"en-US":{"*":[{"path":"/","title":"chunk-file-load","meta":{}},{"path":"/use","title":"\u57fa\u672c\u4f7f\u7528\u793a\u4f8b","meta":{}}]}},"locales":[{"name":"en-US","label":"English"}],"navs":{},"title":"chunk-file-upload","logo":"https://user-images.githubusercontent.com/9554297/83762004-a0761b00-a6a9-11ea-83b4-9c8ff721d4b8.png","mode":"doc","repository":{"url":"https://github.com/food-billboard/chunk-file-load","branch":"master"},"theme":{},"exportStatic":{}}')},x2v5:function(e){e.exports=JSON.parse("{}")}}]);